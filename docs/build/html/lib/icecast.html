

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Icecast Interface &mdash; MusicDB 7.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MusicDB 7.1.0 documentation" href="../index.html"/>
        <link rel="next" title="Meta Tags" href="metatags.html"/>
        <link rel="prev" title="GStreamer Interface" href="gstreamer.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MusicDB
          

          
          </a>

          
            
            
              <div class="version">
                7.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/comparison.html">Comparison to Other Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#introducing-other-tools">Introducing other tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#comparison">Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/concept.html">Philosophy of MusicDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/config.html">MusicDB Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#meta">meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#websocket">websocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#tls">TLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#database">database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#music">music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#artwork">artwork</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#videoframes">videoframes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#uploads">uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#extern">extern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#tracker">tracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#lycra">lycra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#icecast">Icecast</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#randy">Randy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#log">log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#debug">debug</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/definitions.html">Definitions in Context of MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#music-songs-and-videos">Music, Songs and Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#artwork-thumbnail-frame-and-preview">Artwork, Thumbnail, Frame and Preview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#flags-vs-tags">Flags vs. Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#music-properties-statistics">Music Properties &amp; Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#mdbstate-vs-streamstate">MDBState vs. StreamState</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/logging.html">Handling log-files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/mods.html">MusicDB Commandline Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#loading-of-modules">Loading of Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#creation-of-new-modules">Creation of new Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/overview.html">Overview of MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#music-information-purple">Music Information (Purple)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-data-blue">MusicDB Data (Blue)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#music-database">Music Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#artwork-cache">Artwork Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-data-configuration">MusicDB Data &amp; Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-components-green">MusicDB Components (Green)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#command-line-modules">Command-Line Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-webui">MusicDB WebUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-server">MusicDB Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#external-servers-black">External Servers (Black)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#http-server">HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#icecast-server">Icecast Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#consuming-music-orange">Consuming Music (Orange)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/streaming.html">MusicDB Stream</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#general-data-flow">General Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#stream-implementation">Stream Implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/testvm.html">MusicDB Test VMs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#qemu-installation">qemu Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#basic-setup">Basic Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#disk-images">Disk Images</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#system-setup">System Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#installing-updating-musicdb-test-environment">Installing/Updating MusicDB Test Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#create-dummy-files">Create Dummy Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#test-systems">Test Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#debian">Debian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#raspian">Raspian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#arch-linux">Arch Linux</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/webapi.html">MusicDB Websocket API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#communication">Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#packet-format">Packet format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#client-side-interface">Client side interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#callback-functions">Callback functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#send-data-to-the-server">Send data to the server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#module-lib.ws.mdbwsi">Server side API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#available-methods">Available Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#artists">Artists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#albums">Albums</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#songs">Songs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#videos">Videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#queue">Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#tag-related">Tag related</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#lyrics">Lyrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#uploading">Uploading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#other">Other</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/workflow.html">Workflow for development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#working-on-code">Working on code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#rebuilding-the-documentation">Rebuilding the Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#using-git">Using git</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#micro-commits">Micro Commits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#createing-a-hotfix">Createing a Hotfix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#merging-develop-to-master">Merging Develop to Master</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#releasing-a-new-version">Releasing a New Version</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/install.html">Installation &amp; Update</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#installation-automatic">Installation (Automatic)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#install-dependencies">Install Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#additional-steps-for-ubuntu">Additional Steps for Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#executing-the-install-sh-script">Executing the install.sh Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#configuring-musicdb">Configuring MusicDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#configuring-musicdb-webui">Configuring MusicDB WebUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#id1">Configuring MusicDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#first-run">First Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#update">Update</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#update-to-a-new-version">Update to a New Version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#installation-manually">Installation (Manually)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#system-preparation">System Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#id2">Install dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#basic-packages">Basic packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#download-musicdb">Download MusicDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#libprinthex">libprinthex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#id3">id3edit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#musicdb">musicdb</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/music.html">Music</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#naming">Naming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#artist-directory-name">Artist Directory Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#album-directory-name">Album Directory Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#song-file-name">Song File Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#music-video-file-name">Music Video File Name</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#importing-albums-to-musicdb">Importing Albums to MusicDB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-database-module">Using the database module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-repair-module">Using the repair module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-add-module">Using the add module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#updating-songs">Updating Songs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#importing-videos-to-musicdb">Importing Videos to MusicDB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/scripts.html">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-boot">musicdb-boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-shutdown">musicdb-shutdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-start">musicdb-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-stop">musicdb-stop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#update">update</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">CLI Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mod/add.html">add - Add New Album to MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#select-album">Select Album</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#repair-file-names">Repair File Names</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#album-import-form">Album Import Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#new-songs-form">New Songs Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#online-check">Online Check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#import-process">Import Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/artwork.html">artwork - Artwork Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/artwork.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/database.html">database - Music DB Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/extern.html">extern - Music File Uploader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/extern.html#class">class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/extern.html#automatization">Automatization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/genres.html">genres - Genre Manager with CLUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/genres.html#managing-genres">Managing Genres</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/genres.html#updating-caches">Updating Caches</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/metadata.html">metadata - Metadata Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/mise.html">mise - Micro Search Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/mise.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/moods.html">moods - Mood Tag Manager with CLUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#mood-list">Mood List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#mood-grid">Mood Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#style-guide">Style Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/repair.html">repair - Repair Database Entries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/repair.html#lyrics-check">Lyrics Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/repair.html#checksum-update">Checksum update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/server.html">server - MusicDB Websocket Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/stats.html">stats - MusicDB Song Statistic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/tags.html">tags - MusicDB Tag Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#main-commands">Main commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#style-guide">Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#example-calls">Example calls</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/videoframes.html">videoframes - Video Frames and Preview Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/videoframes.html#class">class</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/artwork.html">Artwork Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#database">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#path-structure">Path structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/artwork.html#web-browsers">Web Browsers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#scaling">Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#manifest">Manifest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#algorithm">Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#musicdbartwork-class">MusicDBArtwork Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#module-lib.cache">ArtworkCache Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/audiostream.html">Audio Streaming Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#interface">Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#streaming-thread">Streaming Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#command-queue">Command Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#stream-manager-class">Stream Manager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/blacklist.html">Blacklist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/blacklist.html#module-mdbapi.blacklist">Blacklist Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/blacklist.html#id1">Blacklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/blacklist.html#blacklist-interface-class">Blacklist Interface Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/database.html">MusicDBDatabase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/database.html#musicdbdatabase-class">MusicDBDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/extern.html">MusicDBExtern</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#initializing-a-storage">Initializing a Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/extern.html#storage-configuration">Storage Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/extern.html#the-state-file">The State-File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#updating-a-storage">Updating a Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#handling-toxic-environments">Handling Toxic Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#musicdbextern-class">MusicDBExtern Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/lycra.html">LyCra - Lyrics Crawler</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/lycra.html#module-mdbapi.lycra">Lycra API Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/lycra.html#crawler-base-class">Crawler Base Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/lycra.html#module-lib.db.lycradb">Lycra Database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/mise.html">Micro Search Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/mise.html#musicdbmicrosearchengine-class">MusicDBMicroSearchEngine Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/randy.html">Randomizer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/randy.html#module-mdbapi.randy">Randy Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/randy.html#song-selection-algorithm">Song Selection Algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mdbapi/randy.html#database-stage">Database Stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mdbapi/randy.html#blacklist-stage">Blacklist Stage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/randy.html#video-selection-algorithm">Video Selection Algorithm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/randy.html#randy-class">Randy Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/server.html">MusicDB Websocket Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/songqueue.html">MusicDB Song Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/songqueue.html#queue-management">Queue Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/songqueue.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/songqueue.html#song-queue-class">Song Queue Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/tags.html">MusicDBTags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tags.html#musicdbtags-class">MusicDBTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/tracker.html">Song Tracker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tracker.html#tracker-class">Tracker Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tracker.html#module-lib.db.trackerdb">Tracker Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tracker.html#trackerdatabase-class">TrackerDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/uploadmanager.html">Upload Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/uploadmanager.html#uploadmanager-class">UploadManager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/videoframes.html">Video Frames and Preview Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#definitions">Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#database">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#path-structure">Path structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#https-server">HTTPS Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#scaling">Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#algorithm">Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#videoframes-class">VideoFrames Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/videoqueue.html">MusicDB video Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoqueue.html#queue-management">Queue Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoqueue.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoqueue.html#video-queue-class">Video Queue Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/videostream.html">Video Streaming Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#interface">Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#streaming-thread">Streaming Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#command-queue">Command Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#stream-manager-class">Stream Manager Class</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Libraries</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="clui.html">Command Line User Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.text">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.frame">Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.pane">Pane</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.buttonview">ButtonView</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.listview">ListView</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.dialog">Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.textinput">TextInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.boolinput">BoolInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="clui.html#module-lib.clui.tabgroup">TabGroup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="config.html#base-classes">Base Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="config.html#module-lib.cfg.config">Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html#module-lib.cfg.csv">CSVFile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="config.html#musicdb-configuration">MusicDB Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#module-lib.cfg.webui">WebUI Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#module-lib.cfg.extern">External Storage Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html#module-lib.cfg.mdbstate">MusicDB State</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="database.html#database-class">Database Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fileprocessing.html">Fileprocessing Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fileprocessing.html#fileprocessing-class">Fileprocessing Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="filesystem.html">Filesystem Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="filesystem.html#filesystem-class">Filesystem Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gstreamer.html">GStreamer Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gstreamer.html#gstreamer-pipeline">GStreamer Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gstreamer.html#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gstreamer.html#gstreamerinterface-class">GStreamerInterface Class</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Icecast Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction-to-icecast">Introduction to Icecast</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#icecast-configuration">Icecast Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#icecast-class">Icecast Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="metatags.html">Meta Tags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="metatags.html#metatags-class">MetaTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mp3file.html">MP3 File Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mp3file.html#mp3file-class">MP3File Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mp3stream.html">MP3 Stream Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mp3stream.html#mp3stream-class">MP3Stream Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mp3transcoder.html">MP3 Transcoder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mp3transcoder.html#gstreamer-pipeline">GStreamer Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="mp3transcoder.html#unix-pipe">UNIX Pipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="mp3transcoder.html#transcoding">Transcoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="mp3transcoder.html#mp3transcoder-class">MP3Transcoder Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="musicdb.html">MusicDatabase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#validity-of-columns">Validity of columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#adding-a-column">Adding a Column</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#songs">Songs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#song-relates-methods">Song Relates Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#videos">Videos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#video-relates-methods">Video Relates Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#albums">Albums</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#album-related-methods">Album Related Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#artworks">Artworks</a></li>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#origin">Origin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#artists">Artists</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#lyrics">Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#tags">Tags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#tag-definition-table">Tag Definition Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#tag-mapping-table">Tag Mapping Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="musicdb.html#tag-related-methods">Tag Related Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musicdb.html#musicdatabase-class">MusicDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="namedpipe.html">NamedPipe</a><ul>
<li class="toctree-l2"><a class="reference internal" href="namedpipe.html#namedpipe-class">NamedPipe Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pidfile.html">PID File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="websockets.html">MusicDB Websocket Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="websockets.html#module-lib.ws.server">Websocket Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="websockets.html#module-lib.ws.websocket">Websocket Protocol</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">JaveScript Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../webui/websockets.html">Websocket Connection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#connection-process">Connection Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#watchdog">Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#communication-with-the-server">Communication with the server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#sending-data">Sending Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#receiving-data">Receiving Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#minimal-usage">Minimal usage</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html">Impressum</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#angaben-gemasz-5-tmg">Angaben gemäß § 5 TMG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#kontakt">Kontakt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#verantwortlich-fur-den-inhalt-nach-55-abs-2-rstv">Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-inhalte">Haftung für Inhalte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-links">Haftung für Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#urheberrecht">Urheberrecht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html#datenschutzerklarung-privacy-statement">Datenschutzerklärung / Privacy Statement</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#datenschutz">Datenschutz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#cookies">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#server-log-files">Server-Log-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#facebook-plugins-like-button">Facebook-Plugins (Like-Button)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#twitter">Twitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#google">Google+</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#youtube">YouTube</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#ssl-verschlusselung">SSL-Verschlüsselung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#widerspruch-werbe-mails">Widerspruch Werbe-Mails</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MusicDB</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Icecast Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/lib/icecast.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-lib.stream.icecast">
<span id="icecast-interface"></span><h1>Icecast Interface<a class="headerlink" href="#module-lib.stream.icecast" title="Permalink to this headline">¶</a></h1>
<p>This module implements the interface to <a class="reference external" href="https://icecast.org/">Icecast</a>.</p>
<p>The stream uses the <code class="xref py py-mod docutils literal notranslate"><span class="pre">lib.stream.libshout2</span></code> module as wrapper
to <a class="reference external" href="https://github.com/xiph/Icecast-libshout">libshout</a>
from the <a class="reference external" href="https://icecast.org/">Icecast</a> project.</p>
<div class="section" id="introduction-to-icecast">
<h2>Introduction to Icecast<a class="headerlink" href="#introduction-to-icecast" title="Permalink to this headline">¶</a></h2>
<p>A setup using Icecast consist of three components. Using Icecast’s terms, the are the following:</p>
<blockquote>
<div><dl class="simple">
<dt>Source Client:</dt><dd><p>This the software that provides the music. In this setup, it is <em>MusicDB</em>.
It is called client, because it connects to Icecast that can manage multiple source clients.</p>
</dd>
<dt>Icecast Server:</dt><dd><p>This is <em>Icecast</em> itself. It servers the audio stream to the world.</p>
</dd>
<dt>Listener:</dt><dd><p>The listener is the receiver of the stream. For example VLC.</p>
</dd>
</dl>
</div></blockquote>
<p>Icecast can handle multiple sources.
Each source is used for the input of a <em>Mountpoint</em>.
All <em>Listeners</em> that want to access the audio stream receives the data from this Mountpoint’s output.</p>
<p>For more details see the <a class="reference external" href="https://icecast.org/docs/icecast-trunk/basic_setup/">Icecast Documentation</a>.</p>
<div class="section" id="icecast-configuration">
<h3>Icecast Configuration<a class="headerlink" href="#icecast-configuration" title="Permalink to this headline">¶</a></h3>
<p>The Icecast configuration defines the <em>Source Client</em> and how the data from the Source Clients gets served to the listeners.</p>
<p>In this section, I only point out the more important settings of the whole Icecast configuration.
There is a good example configuration provided by MusicDB.
The following list addresses the settings in the XML file for the Icecast configration.</p>
<blockquote>
<div><dl class="simple">
<dt>icecast/authentication/source-password:</dt><dd><p>This is the password <em>MusicDB</em> needs to know to connect to Icecast.
So this password must be the same as in MusicDB Configuration <code class="docutils literal notranslate"><span class="pre">[icecast]-&gt;password</span></code>.</p>
</dd>
</dl>
</div></blockquote>
<p>There are two ports needed for the MusicDB/Icecast setup.
One port to connect MusicDB to Icecast, and one to provide the stream to Listeners.
The MusicDB connection (Port 6666) is bound to localhost and not encrypted.
The other port (666) can be open to the world because it will be encrypted and protected against unwanted access.</p>
<p>The ports will be configured in the <code class="docutils literal notranslate"><span class="pre">icecast</span></code> section of the configuration file by adding <code class="docutils literal notranslate"><span class="pre">listen-socket</span></code> sections:</p>
<blockquote>
<div><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="c">&lt;!-- Extern --&gt;</span>
<span class="nt">&lt;listen-socket&gt;</span>
    <span class="nt">&lt;port&gt;</span>666<span class="nt">&lt;/port&gt;</span>
    <span class="nt">&lt;ssl&gt;</span>1<span class="nt">&lt;/ssl&gt;</span>
<span class="nt">&lt;/listen-socket&gt;</span>

<span class="c">&lt;!-- Intern --&gt;</span>
<span class="nt">&lt;listen-socket&gt;</span>
    <span class="nt">&lt;port&gt;</span>6666<span class="nt">&lt;/port&gt;</span>
    <span class="nt">&lt;ssl&gt;</span>0<span class="nt">&lt;/ssl&gt;</span>
    <span class="nt">&lt;shoutcast-mount&gt;</span>/stream<span class="nt">&lt;/shoutcast-mount&gt;</span>
<span class="nt">&lt;/listen-socket&gt;</span>
</pre></div>
</div>
<dl class="simple">
<dt>icecast/listen-socket/shoutcast-mount:</dt><dd><p>This setting defines the <em>Mountpoint</em> name (starting with “/”).
It must be the same like the one set in MusicDB’s configuration: <code class="docutils literal notranslate"><span class="pre">[icecast]-&gt;mountname</span></code>
Further more it must be equal to the name definded in the detailed mount specification: <code class="docutils literal notranslate"><span class="pre">icecast/mount/mount-name</span></code>.</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="icecast-class">
<h2>Icecast Class<a class="headerlink" href="#icecast-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="lib.stream.icecast.IcecastInterface">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">lib.stream.icecast.</span></code><code class="sig-name descname"><span class="pre">IcecastInterface</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mountname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>This Icecast interface manages the connection to the Icecast server.</p>
<p>The following values for setting up the connection via libshout are hard coded.
They can easily be changed in the Icecast configuration in the <code class="docutils literal notranslate"><span class="pre">icecast/mount</span></code> section.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 23%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>protocol</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SHOUT_PROTOCOL_HTTP</span></code></p></td>
<td><p>The native and recommended format for Icecast 2</p></td>
</tr>
<tr class="row-odd"><td><p>format</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SHOUT_FORMAT_MP3</span></code></p></td>
<td><p>Obvious. MusicDB streams mp3 files</p></td>
</tr>
<tr class="row-even"><td><p>public</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>For security and privacy reasons</p></td>
</tr>
<tr class="row-odd"><td><p>host</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;localhost&quot;</span></code></p></td>
<td><p>For security reasons MusicDB and Icecast must run on the same computer</p></td>
</tr>
<tr class="row-even"><td><p>name</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;MusicDB</span> <span class="pre">Stream&quot;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>dumpfile</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>Storing the stream does not make sense for non-moderated streams</p></td>
</tr>
<tr class="row-even"><td><p>url</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>There is no website for the stream, because it is a private stream</p></td>
</tr>
<tr class="row-odd"><td><p>genre</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>Not relevant for private streams</p></td>
</tr>
<tr class="row-even"><td><p>description</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>Not relevant for private streams</p></td>
</tr>
<tr class="row-odd"><td><p>agent</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>Not relevant</p></td>
</tr>
<tr class="row-even"><td><p>audio_info</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td><p>Not relevant</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The Icecast Interface class can stream any data to the Icecast Server via <a class="reference internal" href="#lib.stream.icecast.IcecastInterface.StreamChunk" title="lib.stream.icecast.IcecastInterface.StreamChunk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StreamChunk()</span></code></a>.
In general this should be not necessary!
Instead only use the <a class="reference internal" href="#lib.stream.icecast.IcecastInterface.StreamFile" title="lib.stream.icecast.IcecastInterface.StreamFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StreamFile()</span></code></a> method that streams a mp3 file addressed by its path.
Advantage of the <a class="reference internal" href="#lib.stream.icecast.IcecastInterface.StreamFile" title="lib.stream.icecast.IcecastInterface.StreamFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StreamFile()</span></code></a> is, beside a clean frame wise transfer of the data to the server,
that the stream can be muted via <a class="reference internal" href="#lib.stream.icecast.IcecastInterface.Mute" title="lib.stream.icecast.IcecastInterface.Mute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mute()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port</strong> (<em>int</em>) – port number for the <em>Source Client</em> connection</p></li>
<li><p><strong>user</strong> (<em>str</em>) – Name of the source user</p></li>
<li><p><strong>password</strong> (<em>str</em>) – The password of the source user</p></li>
<li><p><strong>mountname</strong> (<em>str</em>) – Name of the mountpoint to use.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create IcecastInterface object</span>
<span class="n">icecast</span> <span class="o">=</span> <span class="n">IcecastInterface</span><span class="p">(</span><span class="mi">666</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;hackme&quot;</span><span class="p">,</span> <span class="s2">&quot;/stream&quot;</span><span class="p">)</span>

<span class="c1"># Connect to the Icecast server</span>
<span class="n">icecast</span><span class="o">.</span><span class="n">Connect</span><span class="p">()</span>

<span class="c1"># Stream one file</span>
<span class="k">for</span> <span class="n">size</span><span class="p">,</span> <span class="n">offset</span> <span class="ow">in</span> <span class="n">icecast</span><span class="o">.</span><span class="n">StreamFile</span><span class="p">(</span><span class="s2">&quot;/tmp/test.mp3&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%i</span><span class="s2"> of </span><span class="si">%i</span><span class="s2"> bytes sent&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">size</span><span class="p">))</span>

<span class="c1"># Disconnect from the Icecast server</span>
<span class="n">icecast</span><span class="o">.</span><span class="n">Disconnect</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt id="lib.stream.icecast.IcecastInterface.Connect">
<code class="sig-name descname"><span class="pre">Connect</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface.Connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface.Connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to connect to Icecast.</p>
<p>If already connected, only <code class="docutils literal notranslate"><span class="pre">True</span></code> gets returned with out opening again.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="lib.stream.icecast.IcecastInterface.Disconnect">
<code class="sig-name descname"><span class="pre">Disconnect</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface.Disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface.Disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to close the Icecast connection.</p>
<p>If already disconnected, only <code class="docutils literal notranslate"><span class="pre">True</span></code> gets returned with out disconnecting again.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="lib.stream.icecast.IcecastInterface.IsConnected">
<code class="sig-name descname"><span class="pre">IsConnected</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface.IsConnected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface.IsConnected" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if connected to Icecase. <code class="docutils literal notranslate"><span class="pre">False</span></code> of not connected.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="lib.stream.icecast.IcecastInterface.Mute">
<code class="sig-name descname"><span class="pre">Mute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface.Mute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface.Mute" title="Permalink to this definition">¶</a></dt>
<dd><p>This method sets the Icecast Interface into a mute state (when <code class="docutils literal notranslate"><span class="pre">state</span> <span class="pre">==</span> <span class="pre">True</span></code>).
Then, the method <a class="reference internal" href="#lib.stream.icecast.IcecastInterface.StreamFile" title="lib.stream.icecast.IcecastInterface.StreamFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StreamFile()</span></code></a> streams silence instead of the file content.
After leaving the mute state, the file streaming continues at the position it got muted (=paused)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> (<em>bool</em>) – Mute stream when <code class="docutils literal notranslate"><span class="pre">True</span></code>, otherwise continue streaming audio</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="lib.stream.icecast.IcecastInterface.StreamChunk">
<code class="sig-name descname"><span class="pre">StreamChunk</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chunk</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface.StreamChunk"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface.StreamChunk" title="Permalink to this definition">¶</a></dt>
<dd><p>This method send a chunk of a file to the Icecast server.
The method synchronizes with Icecast before sending the data.
This is a blocking process!</p>
<p>When sending a chunk of data to Icecast fails,
the method disconnects from the Server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>chunk</strong> (<em>bytes</em>) – A chunk of a file to stream to Icecast</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>TypeError</strong> – When <code class="docutils literal notranslate"><span class="pre">chunk</span></code> is not of type bytes</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">mp3</span><span class="p">:</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="n">mp3</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File sent.&quot;</span><span class="p">)</span>
            <span class="k">break</span>

        <span class="n">retval</span> <span class="o">=</span> <span class="n">icecast</span><span class="o">.</span><span class="n">StreamChunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">retval</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERROR&quot;</span><span class="p">)</span>
            <span class="k">break</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="lib.stream.icecast.IcecastInterface.StreamFile">
<code class="sig-name descname"><span class="pre">StreamFile</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface.StreamFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface.StreamFile" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a generator that sends a mp3 file to the Icecast server.
The mp3 file gets split into its frames, and sent frame wise.</p>
<p>After sending one chunk, the generator returns a dictionary with exact the keys and values
that gets returned by <a class="reference internal" href="mp3stream.html#lib.stream.mp3stream.MP3Stream.Frames" title="lib.stream.mp3stream.MP3Stream.Frames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lib.stream.mp3stream.MP3Stream.Frames()</span></code></a> and  <a class="reference internal" href="mp3stream.html#lib.stream.mp3stream.MP3Stream.AnalyzeHeader" title="lib.stream.mp3stream.MP3Stream.AnalyzeHeader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lib.stream.mp3stream.MP3Stream.AnalyzeHeader()</span></code></a></p>
<p>This frame dictionary gets extended by one further key: <code class="docutils literal notranslate"><span class="pre">muted</span></code>.
When this value is <code class="docutils literal notranslate"><span class="pre">True</span></code>, then a silent frame got sent.
In this case, all information in the dictionary relate to the next frame from the mp3 file that will be send when the stream continues.
When <code class="docutils literal notranslate"><span class="pre">False</span></code> then the information are related to the actual sent frame.</p>
<p>Streaming of the file using this method allows to pause the audio stream by calling the <a class="reference internal" href="#lib.stream.icecast.IcecastInterface.Mute" title="lib.stream.icecast.IcecastInterface.Mute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Mute()</span></code></a> method.
Then instead of the frames from the file, a hard coded frame of pure silence gets streamed as long as the mute-state persists.
Instead of one silent frame, 10 frames will be streamed at once.
This is about 261ms of silence.</p>
<p>The control flow is visualized in the following image:</p>
<div class="graphviz"><object data="../_images/graphviz-4c64cef2ca6cda53846b7d30d0e643c7d0c06e0a.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph hierarchy {
    size=&quot;5,8&quot;
    start           [label=&quot;Start&quot;];
    loadmp3         [shape=box,     label=&quot;Load mp3 file&quot;]
    getframe        [shape=box,     label=&quot;Get next frame&quot;]
    ismuted         [shape=diamond, label=&quot;state == muted ?&quot;]
    streamsilence   [shape=box,     label=&quot;Stream silence&quot;]
    yieldnextframe  [shape=box,     label=&quot;Return frame&quot;]
    streamframe     [shape=box,     label=&quot;Stream frame&quot;]
    yieldframe      [shape=box,     label=&quot;Return frame&quot;]
    end             [label=&quot;Stop generator&quot;];

    start           -&gt; loadmp3
    loadmp3         -&gt; getframe
    getframe        -&gt; ismuted          [label=&quot;Frame available&quot;]
    ismuted         -&gt; streamsilence    [label=&quot;Yes&quot;]
    ismuted         -&gt; streamframe      [label=&quot;No&quot;]
    streamsilence   -&gt; yieldnextframe
    streamframe     -&gt; yieldframe
    yieldnextframe  -&gt; ismuted
    yieldframe      -&gt; getframe
    getframe        -&gt; end              [label=&quot;No further frames&quot;]

    streamsilence   -&gt; end              [label=&quot;On error&quot;]
    streamframe     -&gt; end              [label=&quot;On error&quot;]
}</p></object></div>
<p>The silent frame is optimized to be injected in the mp3-files generated by MusicDB for the MP3 Cache.
The mp3 file was generated as shown in the script example below.
Then the first frame was captured via the <a class="reference internal" href="mp3stream.html#lib.stream.mp3stream.MP3Stream.Frames" title="lib.stream.mp3stream.MP3Stream.Frames"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lib.stream.mp3stream.MP3Stream.Frames()</span></code></a> method.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ffmpeg -filter_complex <span class="nv">aevalsrc</span><span class="o">=</span><span class="m">0</span> -acodec libmp3lame -ab 320k -t <span class="m">1</span> monosilence.mp3
ffmpeg -i monosilence.mp3 -ab 320k -ac <span class="m">2</span> stereosilence.mp3
</pre></div>
</div>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Absolute path to the mp3 file to stream. The encoding must be the same for all files!</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Returns a generator that returns the currently streamed frame.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">frameinfo</span> <span class="ow">in</span> <span class="n">icecast</span><span class="o">.</span><span class="n">StreamFile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">frameinfo</span><span class="p">[</span><span class="s2">&quot;muted&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Stream is muted.&quot;</span><span class="p">)</span>
        <span class="k">continue</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%i</span><span class="s2">. frame of </span><span class="si">%i</span><span class="s2"> frames sent. Length: </span><span class="si">%s</span><span class="s2"> ms&quot;</span><span class="o">%</span><span class="p">(</span>
            <span class="n">frameinfo</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span>
            <span class="n">frameinfo</span><span class="p">[</span><span class="s2">&quot;total&quot;</span><span class="p">],</span>
            <span class="n">frameinfo</span><span class="p">[</span><span class="s2">&quot;header&quot;</span><span class="p">][</span><span class="s2">&quot;frametime&quot;</span><span class="p">]</span>
            <span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="lib.stream.icecast.IcecastInterface.UpdateTitle">
<code class="sig-name descname"><span class="pre">UpdateTitle</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/stream/icecast.html#IcecastInterface.UpdateTitle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#lib.stream.icecast.IcecastInterface.UpdateTitle" title="Permalink to this definition">¶</a></dt>
<dd><p>This method updates the stream title.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>title</strong> (<em>str</em>) – A string as new title for the stream - for example the song name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>TypeError</strong> – When <code class="docutils literal notranslate"><span class="pre">title</span></code> is not of type string</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018,2019,2020,2021 Ralf Stemmer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'7.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>