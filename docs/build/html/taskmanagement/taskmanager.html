

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Task Management Thread &mdash; MusicDB 8.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MusicDB 8.0.0 documentation" href="../index.html"/>
        <link rel="next" title="Upload Tasks Management" href="uploadmanager.html"/>
        <link rel="prev" title="Integration Tasks Management" href="integrationmanager.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MusicDB
          

          
          </a>

          
            
            
              <div class="version">
                8.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/install.html">Installation &amp; Update</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#download">Download</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#installation-via-package-manager">Installation via Package Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#initial-setup">Initial Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#creating-a-music-directory">Creating a Music Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#websocket-settings">Websocket Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#debugging-logs">Debugging logs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#start-musicdb-server">Start MusicDB Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#setup-web-user-interface-via-apache">Setup Web User Interface via Apache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#start-the-web-server">Start the Web Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#setup-audio-streaming-via-icecast">Setup Audio Streaming via Icecast</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#setup-icecast">Setup Icecast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#run-icecast">Run Icecast</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#final-steps">Final Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/import.html">Upload and Importing Music</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/import.html#open-import-manager">Open Import Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/import.html#uploading-an-album">Uploading an Album</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/import.html#importing-an-album">Importing an Album</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/music.html">Music Naming Scheme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#overview-of-the-naming-scheme">Overview of the Naming Scheme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#artist-directory-name">Artist Directory Name</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#album-directory-name">Album Directory Name</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#song-file-name">Song File Name</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#music-video-file-name">Music Video File Name</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/webui.html">WebUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/webui.html#architecture-and-wording">Architecture and Wording</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/webui.html#webui-in-audio-mode">WebUI in Audio Mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/webui.html#genre-view">Genre View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/webui.html#hud">HUD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/webui.html#stream-control">Stream Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/webui.html#artists-view">Artists View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/webui.html#album-view">Album View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/webui.html#queue-view">Queue View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/webui.html#lyrics-view">Lyrics View</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/webui.html#webui-settings-mode">WebUI Settings Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/stream.html">Audio Stream</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/stream.html#managing-the-audio-stream">Managing the Audio Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/stream.html#connection-to-audio-stream-via-vlc">Connection to Audio Stream via VLC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/stream.html#connection-to-audio-stream-via-webui">Connection to Audio Stream via WebUI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/cli.html">Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/artwork.html">artwork - Artwork Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/database.html">database - Music DB Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/extern.html">extern - Music File Exporter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mod/extern.html#file-export-to-external-device">File Export to External Device</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mod/metadata.html">metadata - Metadata Reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/mise.html">mise - Micro Search Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/server.html">server - MusicDB Websocket Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/stats.html">stats - MusicDB Song Statistic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html">tags - MusicDB Tag Manager</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mod/tags.html#main-commands">Main commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/tags.html#style-guide">Style Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/tags.html#example-calls">Example calls</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mod/videoframes.html">videoframes - Video Frames and Preview Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/fromsource.html">Installation From Source</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/fromsource.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/fromsource.html#installing-the-back-end">Installing the Back-End</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/fromsource.html#installing-the-front-end">Installing the Front-End</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/fromsource.html#installing-data-and-configuration-files">Installing Data and Configuration Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/fromsource.html#configure-selinux">Configure SELinux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/installdocs.html">Documentation Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concepts and Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/concept.html">Philosophy of MusicDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/config.html">MusicDB Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#meta">meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#musicdb">musicdb</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#directories">directories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#websocket">websocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#music">music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#albumcover">albumcover</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#videoframes">videoframes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#uploads">uploads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#extern">extern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#tracker">tracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#icecast">Icecast</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#randy">randy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#log">log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#debug">debug</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/security.html">Security Concept</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/security.html#file-access-permissions">File Access Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/security.html#password-protected-audio-stream">Password Protected Audio Stream</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/data.html">MusicDB Data Files and Directories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/data.html#music-directory">Music Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/data.html#musicdb-data-directory">MusicDB Data Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/data.html#musicdb-log-file">MusicDB Log File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/data.html#transition-from-7-2-0-to-8-0-0">Transition from 7.2.0 to 8.0.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/data.html#databases">Databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/data.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/data.html#artworks">Artworks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/data.html#music">Music</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/data.html#web-server-and-logrotate">Web Server and Logrotate</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/definitions.html">Definitions in Context of MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#music-songs-and-videos">Music, Songs and Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#artwork-thumbnail-frame-and-preview">Artwork, Thumbnail, Frame and Preview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#flags-vs-tags">Flags vs. Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#music-properties-statistics">Music Properties &amp; Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/definitions.html#mdbstate-vs-streamstate">MDBState vs. StreamState</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/overview.html">Overview of MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-green">MusicDB (Green)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-server">MusicDB Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-webui">MusicDB WebUI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#external-servers-black">External Servers (Black)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#http-server">HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#icecast-server">Icecast Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#music-information-purple">Music Information (Purple)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-data-blue">MusicDB Data (Blue)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#music-database">Music Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#artwork-cache">Artwork Cache</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/comparison.html">Comparison to Other Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#comparison">Comparison</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/comparison.html#web-ui-and-streaming-capabilities">Web UI and Streaming Capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/comparison.html#detailed-look">Detailed Look</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deeper Insight for Hackers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/streaming.html">MusicDB Streaming Concept</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#general-data-flow">General Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#stream-implementation">Stream Implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/mods.html">Creating new CLI Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#loading-of-modules">Loading of Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#creation-of-new-modules">Creation of new Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/distribution.html">Workflow for distribution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/distribution.html#create-release-candidate-branch">Create Release Candidate Branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/distribution.html#update-version-numbers">Update Version Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/distribution.html#source-tarball">Source Tarball</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/distribution.html#arch-linux-pacman-package">Arch Linux pacman Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/distribution.html#fedora-rpm-package">Fedora rpm Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/distribution.html#debian-ubuntu-deb-package">Debian/Ubuntu deb Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/webapi.html">MusicDB Websocket API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#communication">Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#packet-format">Packet format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#client-side-interface">Client side interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#callback-functions">Callback functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#send-data-to-the-server">Send data to the server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#module-musicdb.lib.ws.mdbwsi">Server side API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#available-methods">Available Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#special-functions">Special Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#artists">Artists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#albums">Albums</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#songs">Songs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#videos">Videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#queue">Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#tag-related">Tag related</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#lyrics">Lyrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#uploading">Uploading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#file-handling">File Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#other">Other</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/accesspermissions.html">Access Permissions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/accesspermissions.html#accesspermissions-class">AccessPermissions Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/artwork.html">Artwork Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#artwork-related-database-entries">Artwork Related Database Entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#artwork-path-structure">Artwork Path structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/artwork.html#web-browsers">Web Browsers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#scaled-artwork">Scaled Artwork</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#configuration-for-artworks">Configuration for Artworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#algorithm-to-create-artworks">Algorithm to Create Artworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#musicdbartwork-class">MusicDBArtwork Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/artwork.html#module-musicdb.lib.cache">ArtworkCache Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/audiostream.html">Audio Streaming Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#audio-streaming-interface">Audio Streaming Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#audio-streaming-thread">Audio Streaming Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#audio-stream-command-queue">Audio Stream Command Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#audio-stream-event-management">Audio Stream Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/audiostream.html#audio-stream-manager-class">Audio Stream Manager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/blacklist.html">Blacklist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/blacklist.html#module-musicdb.mdbapi.blacklist">Blacklist Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/blacklist.html#music-selection-blacklist">Music Selection Blacklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/blacklist.html#blacklist-interface-class">Blacklist Interface Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/extern.html">MusicDBExtern</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#initializing-a-storage">Initializing a Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/extern.html#storage-configuration">Storage Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/extern.html#the-state-file">The State-File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#updating-a-storage">Updating a Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#handling-toxic-environments">Handling Toxic Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/extern.html#musicdbextern-class">MusicDBExtern Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/mise.html">Micro Search Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/mise.html#musicdbmicrosearchengine-class">MusicDBMicroSearchEngine Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/music.html">Music Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/music.html#musicdbmusic-class">MusicDBMusic Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/musicdirectory.html">MusicDirectory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/musicdirectory.html#musicdirectory-class">MusicDirectory Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/randy.html">Randomizer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/randy.html#module-musicdb.mdbapi.randy">Randy Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/randy.html#song-selection-algorithm">Song Selection Algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mdbapi/randy.html#database-stage">Database Stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mdbapi/randy.html#blacklist-stage">Blacklist Stage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mdbapi/randy.html#video-selection-algorithm">Video Selection Algorithm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/randy.html#randy-class">Randy Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/server.html">MusicDB Websocket Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/songqueue.html">MusicDB Song Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/songqueue.html#song-queue-management">Song Queue Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/songqueue.html#song-queue-event-management">Song Queue Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/songqueue.html#song-queue-class">Song Queue Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/tags.html">MusicDBTags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tags.html#musicdbtags-class">MusicDBTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/tracker.html">Song Tracker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tracker.html#tracker-class">Tracker Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tracker.html#module-musicdb.lib.db.trackerdb">Tracker Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/tracker.html#trackerdatabase-class">TrackerDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/videoframes.html">Video Frames and Preview Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#definitions-in-context-of-videos">Definitions in Context of Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#relevant-database-entries">Relevant Database Entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#video-frames-path-structure">Video Frames Path structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#https-server-configuration-for-video-frames">HTTPS Server Configuration for Video Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#scaling-video-frames">Scaling Video Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#configuration-of-video-frames">Configuration of Video Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#algorithm-for-creating-video-frames">Algorithm for Creating Video Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoframes.html#videoframes-class">VideoFrames Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/videoqueue.html">MusicDB video Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoqueue.html#video-queue-management">Video Queue Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoqueue.html#video-queue-event-management">Video Queue Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videoqueue.html#video-queue-class">Video Queue Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mdbapi/videostream.html">Video Streaming Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#video-streaming-interface">Video Streaming Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#video-streaming-thread">Video Streaming Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#video-stream-command-queue">Video Stream Command Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#video-stream-event-management">Video Stream Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mdbapi/videostream.html#video-stream-manager-class">Video Stream Manager Class</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../lib/config.html">Configuration Access</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#base-configuration-classes">Base Configuration Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/config.html#module-musicdb.lib.cfg.config">ini Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/config.html#module-musicdb.lib.cfg.csv">csv Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#musicdb-configuration-file">MusicDB Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-musicdb.lib.cfg.webui">WebUI Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-musicdb.lib.cfg.extern">External Storage Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-musicdb.lib.cfg.mdbstate">MusicDB State Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-musicdb.lib.cfg.wsapikey">WebSocket API Key File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/database.html">Database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/database.html#database-class">Database Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/fileprocessing.html">Fileprocessing Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/fileprocessing.html#fileprocessing-class">Fileprocessing Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/filesystem.html">Filesystem Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/filesystem.html#filesystem-class">Filesystem Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/gstreamer.html">GStreamer Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/gstreamer.html#gstreamer-pipeline">GStreamer Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/gstreamer.html#installation-of-gstreamer-plugins">Installation of GStreamer Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/gstreamer.html#example-for-using-plugins">Example for Using Plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/gstreamer.html#gstreamerinterface-class">GStreamerInterface Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/icecast.html">Icecast Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/icecast.html#introduction-to-icecast">Introduction to Icecast</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/icecast.html#icecast-configuration">Icecast Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/icecast.html#icecast-class">Icecast Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/logging.html">MusicDB Logging</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/logging.html#musicdblogger-class">MusicDBLogger Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/metatags.html">Meta Tags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/metatags.html#metatags-class">MetaTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3stream.html">MP3 Stream Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3stream.html#mp3stream-class">MP3Stream Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3transcoder.html">MP3 Transcoder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#gstreamer-pipeline-for-transcoding">GStreamer Pipeline for Transcoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#unix-pipe">UNIX Pipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#transcoding">Transcoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#mp3transcoder-class">MP3Transcoder Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/musicdb.html">MusicDatabase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#validity-of-columns">Validity of columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#adding-a-column">Adding a Column</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#songs-table">Songs Table</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#song-relates-methods">Song Relates Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#videos-table">Videos Table</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#video-relates-methods">Video Relates Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#albums-table">Albums Table</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#album-related-methods">Album Related Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#artwork-related-methods">Artwork Related Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#origin">Origin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#artists-table">Artists Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#lyrics-table">Lyrics Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#tags-table">Tags Table</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#tag-definition-table">Tag Definition Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#tag-mapping-table">Tag Mapping Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#tag-related-methods">Tag Related Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#musicdatabase-class">MusicDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/pidfile.html">PID File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lib/websockets.html">MusicDB Websocket Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/websockets.html#module-musicdb.lib.ws.server">Websocket Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/websockets.html#module-musicdb.lib.ws.websocket">Websocket Protocol</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Management Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="artworkmanager.html">Artwork Tasks Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="artworkmanager.html#artworkmanager-class">ArtworkManager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="filesystemmanager.html">Files and Directory Tasks Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="filesystemmanager.html#filesystemmanager-class">FilesystemManager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="importmanager.html">Import Tasks Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="importmanager.html#importmanager-class">ImportManager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integrationmanager.html">Integration Tasks Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="integrationmanager.html#integrationmanager-class">IntegrationManager Class</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Task Management Thread</a></li>
<li class="toctree-l1"><a class="reference internal" href="#module-musicdb.taskmanagement.taskmanager">Task Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#taskmanager-class">TaskManager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="uploadmanager.html">Upload Tasks Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="uploadmanager.html#uploadmanager-class">UploadManager Class</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Maintain Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../maintain/configuration.html">Configuration and Data Maintaining Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintain/database.html">Database Maintaining Modules</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">JaveScript Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../webui/websockets.html">Websocket Connection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#connection-process">Connection Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#watchdog">Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#communication-with-the-server">Communication with the server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#sending-data">Sending Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#receiving-data">Receiving Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#minimal-usage">Minimal usage</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html">Impressum</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#angaben-gemasz-5-tmg">Angaben gemäß § 5 TMG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#kontakt">Kontakt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#verantwortlich-fur-den-inhalt-nach-55-abs-2-rstv">Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-inhalte">Haftung für Inhalte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-links">Haftung für Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#urheberrecht">Urheberrecht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html#datenschutzerklarung-privacy-statement">Datenschutzerklärung / Privacy Statement</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#datenschutz">Datenschutz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#cookies">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#server-log-files">Server-Log-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#facebook-plugins-like-button">Facebook-Plugins (Like-Button)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#twitter">Twitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#google">Google+</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#youtube">YouTube</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#ssl-verschlusselung">SSL-Verschlüsselung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#widerspruch-werbe-mails">Widerspruch Werbe-Mails</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MusicDB</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Task Management Thread</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/taskmanagement/taskmanager.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-musicdb.taskmanagement.managementthread">
<span id="task-management-thread"></span><h1>Task Management Thread<a class="headerlink" href="#module-musicdb.taskmanagement.managementthread" title="Permalink to this headline">¶</a></h1>
<dl class="simple">
<dt>The task management is responsible for managing</dt><dd><ul class="simple">
<li><p>Uploads new content to the server (<a class="reference internal" href="uploadmanager.html"><span class="doc">Upload Tasks Management</span></a>)</p></li>
<li><p>Integration of new content into the Music Directory (<a class="reference internal" href="integrationmanager.html"><span class="doc">Integration Tasks Management</span></a>)</p></li>
<li><p>Import of music into the MuiscDB Database (<a class="reference internal" href="importmanager.html"><span class="doc">Import Tasks Management</span></a>)</p></li>
<li><p>Importing artwork for an album (<a class="reference internal" href="artworkmanager.html"><span class="doc">Artwork Tasks Management</span></a>)</p></li>
<li><p>Scanning the file system for new or invalid data (<a class="reference internal" href="filesystemmanager.html"><span class="doc">Files and Directory Tasks Manager</span></a>)</p></li>
</ul>
</dd>
</dl>
<p>The whole process is split into several tasks managed by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">TaskManagementThread()</span></code>.</p>
<p>The communication is handled via notification to allow continuing reporting of status updates
without blocking and even when the connection gets lost in the meanwhile.</p>
<p>Furthermore uploading a file, integrating it into the music directory and importing it into the Music Database
is possible in separate steps.</p>
<p>The whole process is split into several tasks. Each task has its own state.
The task state is persistently stored inside the uploads directory within a JSON file in a <em>tasks</em> sub-directory.
The file name is the task ID (equivalent to the Upload ID) + <code class="docutils literal notranslate"><span class="pre">.json</span></code>.</p>
<p>Possible Task states:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Unrelated states</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;new&quot;</span></code>: A new created, not yet initialized task.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;notexisting&quot;</span></code> In case a Task ID does not match any file. This task does not exist.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;invalidcontent&quot;</span></code>: Processing failed. The content type was unexpected or invalid (Not: artwork, video, album).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;remove&quot;</span></code>: Upload is going to be removed. The task itself as well. After this state appears, the task ID should no longer be considered as valid.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Upload related states:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;waitforchunk&quot;</span></code>: A new chunk of data was requested, and is expected from the client</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;uploadfailed&quot;</span></code>: The upload failed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;uploadcomplete&quot;</span></code>: The whole file is now available in the temporary upload directory and is ready for being preprocessed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;preprocessing&quot;</span></code>: The file is currently in preprocessing state. For example if an archive gets unpacked.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Integration related states:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;readyforintegration&quot;</span></code>: The integration of the file can be started</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;startintegration&quot;</span></code>: Start the integration process</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;integrating&quot;</span></code>: The integration process has started</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;integrationfailed&quot;</span></code>: Integrating the uploaded file into the music directory failed</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Import related states:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;readyforimport&quot;</span></code>: The uploaded file was successfully integrated into the music directory. The content can now be imported into the MusicDB Database. Everything is now based on file management inside the managed Music Directory. From this state, <code class="docutils literal notranslate"><span class="pre">&quot;remove&quot;</span></code> gets triggered.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;startmusicimport&quot;</span></code>: Importing the integrated file into the music database started</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;importingmusic&quot;</span></code>: The music import process has started</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;importfailed&quot;</span></code>: Import process failed (importing the music or generating the artwork)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;startartworkimport&quot;</span></code>: Importing succeeded and generating the artwork started</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;importingartwork&quot;</span></code>: The artwork import process has started</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;importcomplete&quot;</span></code>: Import process complete and successful</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>File system scanning states:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;startfsscan&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;scanningfs&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;fsscanfailed&quot;</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;fsscancomplete&quot;</span></code>:</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>To each task, there are several additional information, also stored in the JSON file.
The following keys are in dictionary that represent a task:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>Unrelated information</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;id&quot;</span></code> (str): The task ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;state&quot;</span></code> (str): One of the task states listed above</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;contenttype&quot;</span></code> (str): Type of the content: (<code class="docutils literal notranslate"><span class="pre">&quot;video&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;albumfile&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;artwork&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;any&quot;</span></code>). An album file can a song but also a booklet PDF, a video clip or any other additional content of an album.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mimetype&quot;</span></code> (str): MIME-Type of the file (For example <code class="docutils literal notranslate"><span class="pre">&quot;image/png&quot;</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;annotations&quot;</span></code> (dict): Additional annotations that can be provided by the user and be optionally used by some task processing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;initializationtime&quot;</span></code> (int): The unix time stamp when the task has been created</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;updatetime&quot;</span></code> (int): Unix time stamp when the task has been updated the last time via <a class="reference internal" href="#musicdb.taskmanagement.taskmanager.TaskManager.UpdateTaskState" title="musicdb.taskmanagement.taskmanager.TaskManager.UpdateTaskState"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateTaskState()</span></code></a>. After initialization it is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Upload related information (May not be valid if there was no upload task)</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;filesize&quot;</span></code> (int): The size of the file in Bytes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;offset&quot;</span></code> (int): The amount of existing bytes of a file that is currently being uploaded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;uploadpath&quot;</span></code> (str): Path of the file in that the uploaded data gets written to Relative to the Upload Directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;preprocessedpath&quot;</span></code> (str): Path of preprocessed data. If available, it should be preferred to <code class="docutils literal notranslate"><span class="pre">&quot;uploadpath&quot;</span></code>. The path is relative to the Upload directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;sourcefilename&quot;</span></code> (str): Name of the original file that got uploaded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;sourcechecksum&quot;</span></code> (str): Checksum of the original file that got uploaded.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Integration related information (May not be valid if the file is not yet integrated into the Music Directory)</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;videopath&quot;</span></code> (str): Path to a video file, relative to the Music Directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;albumpath&quot;</span></code> (str): Path to an album directory, relative to the Music Directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;albumfilepath&quot;</span></code> (str): Path to file of an album, relative to the Music Directory</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Artwork related</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;awsourcetype&quot;</span></code> (str): Type of the artwork source: <code class="docutils literal notranslate"><span class="pre">&quot;imagefile&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;songfile&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;videofile&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;awsourcepath&quot;</span></code> (str): Path to the artwork source</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>After upload is complete,
the Management Thread takes care about post processing or removing no longer needed content
The uploaded file follows the following naming scheme: <em>contenttype</em> + <code class="docutils literal notranslate"><span class="pre">-</span></code> + <em>checksum</em> + <code class="docutils literal notranslate"><span class="pre">.</span></code> + source-file-extension
The upload manager also takes care about the validity of the uploaded file (via SHA-1 checksum).</p>
<p>After an import is completed successfully, all clients connected to the server get a <code class="docutils literal notranslate"><span class="pre">&quot;sys:refresh&quot;</span></code> notification
to update their caches.
This notification is generated via <a class="reference internal" href="../mdbapi/server.html#musicdb.mdbapi.server.UpdateCaches" title="musicdb.mdbapi.server.UpdateCaches"><code class="xref py py-meth docutils literal notranslate"><span class="pre">musicdb.mdbapi.server.UpdateCaches()</span></code></a>.</p>
</div>
<div class="section" id="module-musicdb.taskmanagement.taskmanager">
<span id="task-management"></span><h1>Task Management<a class="headerlink" href="#module-musicdb.taskmanagement.taskmanager" title="Permalink to this headline">¶</a></h1>
<div class="section" id="taskmanager-class">
<h2>TaskManager Class<a class="headerlink" href="#taskmanager-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">musicdb.taskmanagement.taskmanager.</span></span><span class="sig-name descname"><span class="pre">TaskManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a base class that provides a common interface used by the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">TaskManagementThread()</span></code>
to perform the upload, integration and import tasks.</p>
<p>Tasks are stored as JSON file in the MusicDB data directory inside a sub directory <em>tasks</em>.
When a user removed one of the JSON files inside that directory, the task will be set into the <code class="docutils literal notranslate"><span class="pre">remove</span></code> state internally.
This state update will be stored in the previous removed file, so that this file appears short after removing.
Anyway, as soon as the <code class="docutils literal notranslate"><span class="pre">remove</span></code> state got processed, the task file and related uploaded files will be removed again by MusicDB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – <a class="reference internal" href="../lib/config.html#musicdb.lib.cfg.musicdb.MusicDBConfig" title="musicdb.lib.cfg.musicdb.MusicDBConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">MusicDBConfig</span></code></a> object holding the MusicDB Configuration</p></li>
<li><p><strong>database</strong> – (optional) A <a class="reference internal" href="../lib/musicdb.html#musicdb.lib.db.musicdb.MusicDatabase" title="musicdb.lib.db.musicdb.MusicDatabase"><code class="xref py py-class docutils literal notranslate"><span class="pre">MusicDatabase</span></code></a> instance</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – When the arguments are not of the correct type.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.CreateNewTask">
<span class="sig-name descname"><span class="pre">CreateNewTask</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.CreateNewTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.CreateNewTask" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns an empty but initialized task.
The task state will be set to <code class="docutils literal notranslate"><span class="pre">&quot;new&quot;</span></code>.
The task ID will be created by <a class="reference internal" href="#musicdb.taskmanagement.taskmanager.TaskManager.CreateTaskID" title="musicdb.taskmanagement.taskmanager.TaskManager.CreateTaskID"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateTaskID()</span></code></a>.
All other entries are set to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>The new task will not be saved and not scheduled!</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A new task dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.CreateTaskID">
<span class="sig-name descname"><span class="pre">CreateTaskID</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.CreateTaskID"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.CreateTaskID" title="Permalink to this definition">¶</a></dt>
<dd><p>This method creates a new Task ID.
In detail, it is a <a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)">Version 4 Universally Unique Identifier (UUID)</a> .
It will be returned as a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A UUID to be used as entry ID</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.ExistsTaskFile">
<span class="sig-name descname"><span class="pre">ExistsTaskFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.ExistsTaskFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.ExistsTaskFile" title="Permalink to this definition">¶</a></dt>
<dd><p>This method checks if the task file related to <code class="docutils literal notranslate"><span class="pre">task</span></code> exists in the tasks directory.
If it is so, <code class="docutils literal notranslate"><span class="pre">True</span></code> gets returned.
This method can be used to check if the task has been removed by the user.
Reasons for the user to remove a task file can be fixing a stuck process.</p>
<p>This method does not more than checking if the task exists in the file system.
It will not add or remove the task from the global task list processed by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">TaskManagementThread()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<em>dict</em>) – The task to check</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the tasks exists in the file system, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.GetTaskByID">
<span class="sig-name descname"><span class="pre">GetTaskByID</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">taskid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.GetTaskByID"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.GetTaskByID" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns an existing task from the tasklist.
The task gets identified by its ID aka Task ID</p>
<p>When the task does not exits, the clients get an <code class="docutils literal notranslate"><span class="pre">&quot;InternalError&quot;</span></code> notification.
The tasks state is then <code class="docutils literal notranslate"><span class="pre">&quot;notexisting&quot;</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>taskid</strong> (<em>str</em>) – ID of the task</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A task dictionary</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – When <em>taskid</em> is not a string</p></li>
<li><p><strong>ValueError</strong> – When <em>taskid</em> is not a valid key in the Tasks-dictionary</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.GetTasks">
<span class="sig-name descname"><span class="pre">GetTasks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.GetTasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.GetTasks" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The dictionary with all upload tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.InitiateProcess">
<span class="sig-name descname"><span class="pre">InitiateProcess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">taskid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mimetype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contenttype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filesize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checksum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sourcefilename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initialstate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.InitiateProcess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.InitiateProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiates an upload of a file into a MusicDB managed file space.
After calling this method, a notification gets triggered to request the first chunk of data from the clients.
In case uploads are deactivated in the MusicDB Configuration, an <code class="docutils literal notranslate"><span class="pre">&quot;InternalError&quot;</span></code> Notification gets sent to the clients.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>taskid</strong> (<em>str</em>) – Unique ID to identify the upload task</p></li>
<li><p><strong>mimetype</strong> (<em>str</em>) – MIME-Type of the file (example: <code class="docutils literal notranslate"><span class="pre">&quot;image/png&quot;</span></code>)</p></li>
<li><p><strong>contenttype</strong> (<em>str</em>) – Type of the content: (<code class="docutils literal notranslate"><span class="pre">&quot;video&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;album&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;artwork&quot;</span></code>)</p></li>
<li><p><strong>filesize</strong> (<em>int</em>) – Size of the complete file in bytes</p></li>
<li><p><strong>checksum</strong> (<em>str</em>) – SHA-1 check sum of the source file</p></li>
<li><p><strong>sourcefilename</strong> (<em>str</em>) – File name (example: <code class="docutils literal notranslate"><span class="pre">&quot;test.png&quot;</span></code>)</p></li>
<li><p><strong>initialstate</strong> (<em>str</em>) – The Initial state of this process. See <a class="reference internal" href="importmanager.html"><span class="doc">Import Tasks Management</span></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – When one of the arguments has not the expected type</p></li>
<li><p><strong>ValueError</strong> – When <em>contenttype</em> does not have the expected values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.LoadTasks">
<span class="sig-name descname"><span class="pre">LoadTasks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.LoadTasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.LoadTasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads all task from the JSON files inside the tasks-directory.
The list of active tasks will be replaced by the loaded tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.NotifyClient">
<span class="sig-name descname"><span class="pre">NotifyClient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">notification</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.NotifyClient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.NotifyClient" title="Permalink to this definition">¶</a></dt>
<dd><p>This method triggers a client-notification.</p>
<p>There are three kind of notifications:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;ChunkRequest&quot;</span></code>: A new chunk of data is requested</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;StateUpdate&quot;</span></code>: The state or annotations of an upload-task has been changed. See <code class="docutils literal notranslate"><span class="pre">&quot;state&quot;</span></code> value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;InternalError&quot;</span></code>: There is an internal error occurred during. See <code class="docutils literal notranslate"><span class="pre">&quot;message&quot;</span></code> value.</p></li>
</ul>
</div></blockquote>
<p>The notification comes with the current status of the upload process.
This includes the following keys - independent of the state of the upload:</p>
<blockquote>
<div><ul class="simple">
<li><p>taskid: ID of the upload the notification is associated with</p></li>
<li><p>offset: Offset of the requested data in the source file</p></li>
<li><p>chunksize: The maximum chunk size</p></li>
<li><p>state: The current state of the upload task</p></li>
<li><p>message: <code class="docutils literal notranslate"><span class="pre">null</span></code>/<code class="docutils literal notranslate"><span class="pre">None</span></code> or a message from the server</p></li>
<li><p>task: The task dictionary itself</p></li>
<li><p>tasklist: Except for <code class="docutils literal notranslate"><span class="pre">ChunkRequest</span></code> events, the WebSocket server append the result of <a class="reference internal" href="../basics/webapi.html#musicdb.lib.ws.mdbwsi.MusicDBWebSocketInterface.GetCurrentTasks" title="musicdb.lib.ws.mdbwsi.MusicDBWebSocketInterface.GetCurrentTasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">musicdb.lib.ws.mdbwsi.MusicDBWebSocketInterface.GetCurrentTasks()</span></code></a> to the notification</p></li>
</ul>
</div></blockquote>
<p><em>task</em> can be <code class="docutils literal notranslate"><span class="pre">None</span></code> in case the notification is meant to be an information that a given upload ID is invalid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>notification</strong> (<em>str</em>) – Name of the notification</p></li>
<li><p><strong>task</strong> (<em>dict</em>) – Task structure</p></li>
<li><p><strong>message</strong> (<em>str</em>) – (optional) text message (like an error message) to the client</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – When notification has an unknown notification name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.RegisterCallback">
<span class="sig-name descname"><span class="pre">RegisterCallback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.RegisterCallback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.RegisterCallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a callback function that reacts on Upload, Integration or Import related events.
For more details see the module description at the top of this document.</p>
<p>The function must expect two parameters: The notification type (a string) and a dictionary with the status.
Details can be found in the <a class="reference internal" href="#musicdb.taskmanagement.taskmanager.TaskManager.NotifyClient" title="musicdb.taskmanagement.taskmanager.TaskManager.NotifyClient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">NotifyClient()</span></code></a> description.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> – A function that shall be called on an event.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.RemoveCallback">
<span class="sig-name descname"><span class="pre">RemoveCallback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.RemoveCallback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.RemoveCallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a function from the list of callback functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> – A function that shall be called removed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.RemoveTask">
<span class="sig-name descname"><span class="pre">RemoveTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">taskid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.RemoveTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.RemoveTask" title="Permalink to this definition">¶</a></dt>
<dd><p>This method removed a task and all temporary data that belongs to it.
It also removes the task from the tasks list.</p>
<p>Temporary files are <code class="docutils literal notranslate"><span class="pre">&quot;uploadpath&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;preprocessedpath&quot;</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>taskid</strong> (<em>str</em>) – ID Of the task that shall be removed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.SaveTask">
<span class="sig-name descname"><span class="pre">SaveTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.SaveTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.SaveTask" title="Permalink to this definition">¶</a></dt>
<dd><p>This method saves a task in the uploads directory under <code class="docutils literal notranslate"><span class="pre">tasks/${Task</span> <span class="pre">ID}.json</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<em>dict</em>) – The task to save</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.ScheduleTask">
<span class="sig-name descname"><span class="pre">ScheduleTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.ScheduleTask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.ScheduleTask" title="Permalink to this definition">¶</a></dt>
<dd><p>This method adds a new task into the list of tasks that will be processed by the <code class="xref py py-meth docutils literal notranslate"><span class="pre">ManagementThread()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task</strong> (<em>dict</em>) – A new task</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="musicdb.taskmanagement.taskmanager.TaskManager.UpdateTaskState">
<span class="sig-name descname"><span class="pre">UpdateTaskState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errormessage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/musicdb/taskmanagement/taskmanager.html#TaskManager.UpdateTaskState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#musicdb.taskmanagement.taskmanager.TaskManager.UpdateTaskState" title="Permalink to this definition">¶</a></dt>
<dd><p>This method updates and saves the state of an task.
An <code class="docutils literal notranslate"><span class="pre">&quot;StateUpdate&quot;</span></code> notification gets send as well.
If the task already is in the state, nothing happens.
The <code class="docutils literal notranslate"><span class="pre">&quot;updatetime&quot;</span></code> value will be updated to the current unix time stamp.</p>
<p>If <em>errormessage</em> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, the notification gets send as <code class="docutils literal notranslate"><span class="pre">&quot;InternalError&quot;</span></code> with the message</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task</strong> (<em>dict</em>) – Task object to update</p></li>
<li><p><strong>state</strong> (<em>str</em>) – New state</p></li>
<li><p><strong>message</strong> (<em>str</em>) – Optional message</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 - 2022 Ralf Stemmer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'8.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/tabs.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>