

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MusicDBDatabase &mdash; MusicDB 5.2.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MusicDB 5.2.0 documentation" href="../index.html"/>
        <link rel="next" title="MusicDBExtern" href="extern.html"/>
        <link rel="prev" title="Blacklist" href="blacklist.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MusicDB
          

          
          </a>

          
            
            
              <div class="version">
                5.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/comparison.html">Comparison to Other Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#introducing-other-tools">Introducing other tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#comparison">Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/concept.html">Philosophy of MusicDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/config.html">MusicDB Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#meta">meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#websocket">websocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#tls">TLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#database">database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#music">music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#artwork">artwork</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#extern">extern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#tracker">tracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#lycra">lycra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#icecast">Icecast</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#musicai">MusicAI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#randy">Randy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#log">log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#debug">debug</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/logging.html">Handling log-files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/mods.html">MusicDB Commandline Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#loading-of-modules">Loading of Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#creation-of-new-modules">Creation of new Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/overview.html">Overview of MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#music-information-purple">Music Information (Purple)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-data-blue">MusicDB Data (Blue)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#music-database">Music Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#artwork-cache">Artwork Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-data-configuration">MusicDB Data &amp; Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-components-green">MusicDB Components (Green)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#command-line-modules">Command-Line Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-webui">MusicDB WebUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-server">MusicDB Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#external-servers-black">External Servers (Black)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#http-server">HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#icecast-server">Icecast Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#consuming-music-orange">Consuming Music (Orange)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/streaming.html">MusicDB Stream</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#general-data-flow">General Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#stream-implementation">Stream Implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/testvm.html">MusicDB Test VMs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#qemu-installation">qemu Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#basic-setup">Basic Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#disk-images">Disk Images</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#system-setup">System Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#installing-updating-musicdb-test-environment">Installing/Updating MusicDB Test Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#create-dummy-files">Create Dummy Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#test-systems">Test Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#debian">Debian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#raspian">Raspian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#arch-linux">Arch Linux</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/webapi.html">MusicDB Websocket API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#communication">Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#packet-format">Packet format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#client-side-interface">Client side interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#callback-functions">Callback functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#send-data-to-the-server">Send data to the server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#module-lib.ws.mdbwsi">Server side API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#artists">Artists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#albums">Albums</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#songs">Songs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#queue">Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#tag-related">Tag related</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#lyrics">Lyrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#other">Other</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/workflow.html">Workflow for development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#working-on-code">Working on code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#rebuilding-the-documentation">Rebuilding the Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#using-git">Using git</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#micro-commits">Micro Commits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#createing-a-hotfix">Createing a Hotfix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#merging-develop-to-master">Merging Develop to Master</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#releasing-a-new-version">Releasing a New Version</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/docker.html">Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/docker.html#prepare-environment">Prepare Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/docker.html#build-the-image">Build the Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/docker.html#using-the-image">Using the Image</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/install.html">Installation &amp; Update</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#installation-automatic">Installation (Automatic)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#install-dependencies">Install Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#executing-the-install-sh-script">Executing the install.sh Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#install-all-dependencies">Install all Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#configureing-musicdb">Configureing MusicDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#installation-manually">Installation (Manually)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#system-preparation">System Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#id1">Install dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#basic-packages">Basic packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#download-musicdb">Download MusicDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#libprinthex">libprinthex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#id3edit">id3edit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#musicdb">musicdb</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#configureing-musicdb-webui">Configureing MusicDB WebUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#cuda-for-musicai">CUDA for MusicAI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#first-run">First Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#update">Update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/music.html">Music</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#naming">Naming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#artist-directory-name">Artist Directory Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#album-directory-name">Album Directory Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#song-file-name">Song File Name</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#importing-albums-to-musicdb">Importing Albums to MusicDB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-database-module">Using the database module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-repair-module">Using the repair module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-add-module">Using the add module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#updating-songs">Updating Songs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/scripts.html">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-boot">musicdb-boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-shutdown">musicdb-shutdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-start">musicdb-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-stop">musicdb-stop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#update">update</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">CLI Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mod/add.html">add - Add New Album to MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#select-album">Select Album</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#repair-file-names">Repair File Names</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#album-import-form">Album Import Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#new-songs-form">New Songs Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#online-check">Online Check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#import-process">Import Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/artwork.html">artwork - Artwork Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/artwork.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/cache.html">cache - Music Cache Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/cache.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/database.html">database - Music DB Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/extern.html">extern - Music File Uploader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/extern.html#class">class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/extern.html#automatization">Automatization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/genres.html">genres - Genre Manager with CLUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/genres.html#managing-genres">Managing Genres</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/genres.html#updating-caches">Updating Caches</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/metadata.html">metadata - Metadata Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/mise.html">mise - Micro Search Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/mise.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/moods.html">moods - Mood Tag Manager with CLUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#mood-list">Mood List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#mood-grid">Mood Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#style-guide">Style Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/musicai.html">musicai - MusicAI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/musicai.html#module-mod.musicai">Module Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/musicai.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/repair.html">repair - Repair Database Entries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/repair.html#lyrics-check">Lyrics Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/repair.html#checksum-update">Checksum update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/server.html">server - MusicDB Websocket Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/stats.html">stats - MusicDB Song Statistic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/tags.html">tags - MusicDB Tag Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#main-commands">Main commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#style-guide">Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#example-calls">Example calls</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/tracker.html">tracker - Song Tracker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/tracker.html#module-mod.tracker">Module Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tracker.html#class-description">Class Description</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Classes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="artwork.html">Artwork Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#database">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#path-structure">Path structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="artwork.html#web-browsers">Web Browsers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#scaling">Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#manifest">Manifest</a></li>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#algorithm">Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#musicdbartwork-class">MusicDBArtwork Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="artwork.html#module-lib.cache">ArtworkCache Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="blacklist.html">Blacklist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="blacklist.html#module-mdbapi.blacklist">Blacklist Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="blacklist.html#id1">Blacklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="blacklist.html#blacklist-interface-class">Blacklist Interface Class</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MusicDBDatabase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#musicdbdatabase-class">MusicDBDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extern.html">MusicDBExtern</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extern.html#initializing-a-storage">Initializing a Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extern.html#storage-configuration">Storage Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="extern.html#the-state-file">The State-File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="extern.html#updating-a-storage">Updating a Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="extern.html#handling-toxic-environments">Handling Toxic Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="extern.html#musicdbextern-class">MusicDBExtern Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lycra.html">LyCra - Lyrics Crawler</a><ul>
<li class="toctree-l2"><a class="reference internal" href="lycra.html#module-mdbapi.lycra">Lycra API Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="lycra.html#crawler-base-class">Crawler Base Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="lycra.html#module-lib.db.lycradb">Lycra Database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mise.html">Micro Search Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mise.html#musicdbmicrosearchengine-class">MusicDBMicroSearchEngine Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="musicai.html">MusicAI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#external-dependencies">External Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#training-time">Training Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#removing-an-old-model">Removing an old model</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#data-handling">Data Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musicai.html#featureset">Featureset</a></li>
<li class="toctree-l3"><a class="reference internal" href="musicai.html#trainingset">Trainingset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#module-mdbapi.musicai">MusicAI Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#musicai-class">MusicAI Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="musiccache.html">MusicCache</a><ul>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#features-and-constraints">Features and Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#updating-the-cache">Updating the Cache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musiccache.html#add-a-song-to-the-cache">Add a song to the cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="musiccache.html#get-a-songs-path-inside-the-case">Get a songs path inside the case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#musiccache-class">MusicCache Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="randy.html">Randomizer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="randy.html#module-mdbapi.randy">Randy Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="randy.html#song-selection-algorithm">Song Selection Algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="randy.html#database-stage">Database Stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="randy.html#blacklist-stage">Blacklist Stage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="randy.html#randy-class">Randy Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server.html">MusicDB Websocket Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="songqueue.html">MusicDB Song Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="songqueue.html#queue-management">Queue Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="songqueue.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="songqueue.html#song-queue-class">Song Queue Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stream.html">Streaming Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stream.html#interface">Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#streaming-thread">Streaming Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#command-queue">Command Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#stream-manager-class">Stream Manager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tags.html">MusicDBTags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tags.html#musicdbtags-class">MusicDBTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tracker.html">Song Tracker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tracker.html#tracker-class">Tracker Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracker.html#module-lib.db.trackerdb">Tracker Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracker.html#trackerdatabase-class">TrackerDatabase Class</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../lib/clui.html">Command Line User Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.text">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.frame">Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.pane">Pane</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.buttonview">ButtonView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.listview">ListView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.dialog">Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.textinput">TextInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.boolinput">BoolInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.tabgroup">TabGroup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#base-classes">Base Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/config.html#module-lib.cfg.config">Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/config.html#module-lib.cfg.csv">CSVFile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#musicdb-configuration">MusicDB Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-lib.cfg.extern">External Storage Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-lib.cfg.mdbstate">MusicDB State</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/database.html">Database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/database.html#database-class">Database Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/fileprocessing.html">Fileprocessing Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/fileprocessing.html#fileprocessing-class">Fileprocessing Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/filesystem.html">Filesystem Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/filesystem.html#filesystem-class">Filesystem Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/gstreamer.html">GStreamer Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/gstreamer.html#gstreamer-pipeline">GStreamer Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/gstreamer.html#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/gstreamer.html#gstreamerinterface-class">GStreamerInterface Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/hdf5storage.html">HDF5Storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/hdf5storage.html#hdf5storage-class">HDF5Storage Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/icecast.html">Icecast Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/icecast.html#introduction-to-icecast">Introduction to Icecast</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/icecast.html#icecast-configuration">Icecast Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/icecast.html#icecast-class">Icecast Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/metatags.html">Meta Tags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/metatags.html#metatags-class">MetaTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3file.html">MP3 File Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3file.html#mp3file-class">MP3File Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3stream.html">MP3 Stream Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3stream.html#mp3stream-class">MP3Stream Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3transcoder.html">MP3 Transcoder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#gstreamer-pipeline">GStreamer Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#unix-pipe">UNIX Pipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#transcoding">Transcoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#mp3transcoder-class">MP3Transcoder Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/musicdb.html">MusicDatabase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#adding-a-column">Adding a Column</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#songs">Songs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#song-relates-methods">Song Relates Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#albums">Albums</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#album-related-methods">Album Related Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#artworks">Artworks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#origin">Origin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#artists">Artists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#lyrics">Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#tags">Tags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#tag-definition-table">Tag Definition Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#tag-mapping-table">Tag Mapping Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#database-api">Database API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#musicdatabase-class">MusicDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/namedpipe.html">NamedPipe</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/namedpipe.html#namedpipe-class">NamedPipe Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/pidfile.html">PID File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lib/websockets.html">MusicDB Websocket Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/websockets.html#module-lib.ws.server">Websocket Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/websockets.html#module-lib.ws.websocket">Websocket Protocol</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">JaveScript Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../webui/taginput.html">Tag Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webui/taginput.html#taginput-js">taginput.js</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#files">Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#musicdb-interface">MusicDB Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webui/taginput.html#tagmanager-js">tagmanager.js</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#id1">Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#id2">MusicDB Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#id3">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../webui/websockets.html">Websocket Connection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#connection-process">Connection Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#watchdog">Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#communication-with-the-server">Communication with the server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#sending-data">Sending Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#receiving-data">Receiving Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#minimal-usage">Minimal usage</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html">Impressum</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#angaben-gemasz-5-tmg">Angaben gemäß § 5 TMG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#kontakt">Kontakt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#verantwortlich-fur-den-inhalt-nach-55-abs-2-rstv">Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-inhalte">Haftung für Inhalte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-links">Haftung für Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#urheberrecht">Urheberrecht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html#datenschutzerklarung-privacy-statement">Datenschutzerklärung / Privacy Statement</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#datenschutz">Datenschutz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#cookies">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#server-log-files">Server-Log-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#facebook-plugins-like-button">Facebook-Plugins (Like-Button)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#twitter">Twitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#google">Google+</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#youtube">YouTube</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#ssl-verschlusselung">SSL-Verschlüsselung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#widerspruch-werbe-mails">Widerspruch Werbe-Mails</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MusicDB</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>MusicDBDatabase</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/mdbapi/database.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-mdbapi.database">
<span id="musicdbdatabase"></span><h1>MusicDBDatabase<a class="headerlink" href="#module-mdbapi.database" title="Permalink to this headline">¶</a></h1>
<p>This module is the core of the music handling of MusicDB.
It is the interface between the music and its entries in the database (<a class="reference internal" href="../lib/musicdb.html#module-lib.db.musicdb" title="lib.db.musicdb"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lib.db.musicdb</span></code></a>).</p>
<div class="section" id="musicdbdatabase-class">
<h2>MusicDBDatabase Class<a class="headerlink" href="#musicdbdatabase-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mdbapi.database.MusicDBDatabase">
<em class="property">class </em><code class="sig-prename descclassname">mdbapi.database.</code><code class="sig-name descname">MusicDBDatabase</code><span class="sig-paren">(</span><em class="sig-param">config</em>, <em class="sig-param">database</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>This class supports the following features</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>File management</dt><dd><ul>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.FindLostPaths" title="mdbapi.database.MusicDBDatabase.FindLostPaths"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FindLostPaths()</span></code></a>: Check if all paths in the <em>songs</em>, <em>albums</em> and <em>artists</em> table are valid.</p></li>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.FindNewPaths" title="mdbapi.database.MusicDBDatabase.FindNewPaths"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FindNewPaths()</span></code></a>: Check if there are new songs, albums or artists in the music collection that are not in the database.</p></li>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.FixAttributes" title="mdbapi.database.MusicDBDatabase.FixAttributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FixAttributes()</span></code></a>: Change the access mode and ownership of the music to match the configutation</p></li>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AnalysePath" title="mdbapi.database.MusicDBDatabase.AnalysePath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysePath()</span></code></a>: Extract song information from its file path</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">TyrAnalysePathFor()</span></code>: Check if the given path is valid for an artist, album or song</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Database management</dt><dd><ul>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddArtist" title="mdbapi.database.MusicDBDatabase.AddArtist"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddArtist()</span></code></a>, <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddAlbum" title="mdbapi.database.MusicDBDatabase.AddAlbum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddAlbum()</span></code></a>, <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddSong" title="mdbapi.database.MusicDBDatabase.AddSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddSong()</span></code></a>: Adds a new artist, album or song to the database</p></li>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateArtist" title="mdbapi.database.MusicDBDatabase.UpdateArtist"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateArtist()</span></code></a>, <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateAlbum" title="mdbapi.database.MusicDBDatabase.UpdateAlbum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateAlbum()</span></code></a>, <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateSong" title="mdbapi.database.MusicDBDatabase.UpdateSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateSong()</span></code></a>: Updates a artist, album or song path in the database</p></li>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.RemoveArtist" title="mdbapi.database.MusicDBDatabase.RemoveArtist"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RemoveArtist()</span></code></a>, <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.RemoveAlbum" title="mdbapi.database.MusicDBDatabase.RemoveAlbum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RemoveAlbum()</span></code></a>, <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.RemoveSong" title="mdbapi.database.MusicDBDatabase.RemoveSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RemoveSong()</span></code></a>: Removes a artist, album or song from the database</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add information into the database</dt><dd><ul>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddLyricsFromFile" title="mdbapi.database.MusicDBDatabase.AddLyricsFromFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddLyricsFromFile()</span></code></a>: Read lyrics from the meta data of a song file into the database</p></li>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateChecksum" title="mdbapi.database.MusicDBDatabase.UpdateChecksum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateChecksum()</span></code></a>: Calculates and adds the checksum of a song file into the database</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Other</dt><dd><ul>
<li><p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateServerCache" title="mdbapi.database.MusicDBDatabase.UpdateServerCache"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateServerCache()</span></code></a>: Signals the WebSocket Server to refresh its internal caches</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> – MusicDB configuration object</p></li>
<li><p><strong>database</strong> – MusicDB database</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – when <em>config</em> or <em>database</em> not of type <a class="reference internal" href="../lib/config.html#lib.cfg.musicdb.MusicDBConfig" title="lib.cfg.musicdb.MusicDBConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">MusicDBConfig</span></code></a> or <a class="reference internal" href="../lib/musicdb.html#lib.db.musicdb.MusicDatabase" title="lib.db.musicdb.MusicDatabase"><code class="xref py py-class docutils literal notranslate"><span class="pre">MusicDatabase</span></code></a></p>
</dd>
</dl>
<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.AddAlbum">
<code class="sig-name descname">AddAlbum</code><span class="sig-paren">(</span><em class="sig-param">albumpath</em>, <em class="sig-param">artistid=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.AddAlbum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.AddAlbum" title="Permalink to this definition">¶</a></dt>
<dd><p>This method adds an album to the database in the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Check if the album already exists in the database</p></li>
<li><p>Get all songs of the album by getting all files inside the directory except those on the <em>ignoresongs</em>-list.</p></li>
<li><p>Load the metadata from one of those songs using <a class="reference internal" href="../lib/metatags.html#lib.metatags.MetaTags.GetAllMetadata" title="lib.metatags.MetaTags.GetAllMetadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lib.metatags.MetaTags.GetAllMetadata()</span></code></a></p></li>
<li><p>Analyze the path of one of those songs using <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AnalysePath" title="mdbapi.database.MusicDBDatabase.AnalysePath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysePath()</span></code></a></p></li>
<li><p>If <em>artistid</em> is not given as parameter, it gets read from the database identifying the artist by its path.</p></li>
<li><p>Get modification date using <code class="xref py py-meth docutils literal notranslate"><span class="pre">GetModificationDate()</span></code></p></li>
<li><p>Set directory attributes and ownership using <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.FixAttributes" title="mdbapi.database.MusicDBDatabase.FixAttributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FixAttributes()</span></code></a></p></li>
<li><p>Create new entry for the new album in the database and get the default values</p></li>
<li><p>Add each song of the album to the database by calling <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddSong" title="mdbapi.database.MusicDBDatabase.AddSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddSong()</span></code></a></p></li>
<li><p>Write all collected information of the album into the database</p></li>
</ol>
</div></blockquote>
<p>If adding the songs to the database raises an exception, that song gets skipped.
The <em>numofsongs</em> value for the album is the number of actual existing songs for this album in the database.
It is save to add the failed song later by using the <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddSong" title="mdbapi.database.MusicDBDatabase.AddSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddSong()</span></code></a> method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>albumpath</strong> (<em>str</em>) – Absolute path, or path relative to the music root directory, to the album that shall be added to the database.</p></li>
<li><p><strong>artistid</strong> (<em>int</em>) – Optional, default value is <code class="docutils literal notranslate"><span class="pre">None</span></code>. The ID of the artist this album belongs to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If the path does not address a directory</p></li>
<li><p><strong>ValueError</strong> – If album already exists in the database</p></li>
<li><p><strong>AssertionError</strong> – If there is no artist for this album in the database</p></li>
<li><p><strong>AssertionError</strong> – If loading metadata from one of the song files failed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.AddArtist">
<code class="sig-name descname">AddArtist</code><span class="sig-paren">(</span><em class="sig-param">artistpath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.AddArtist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.AddArtist" title="Permalink to this definition">¶</a></dt>
<dd><p>The <em>AddArtist</em> method adds a new artist to the database.
This is done in the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Check if the artist path is inside the music root directory</p></li>
<li><p>Check if the artist is already in the database</p></li>
<li><p>Extract the artist name from the path</p></li>
<li><p>Set directory attributes and ownership using <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.FixAttributes" title="mdbapi.database.MusicDBDatabase.FixAttributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FixAttributes()</span></code></a></p></li>
<li><p>Add artist to database</p></li>
<li><p>Call <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddAlbum" title="mdbapi.database.MusicDBDatabase.AddAlbum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddAlbum()</span></code></a> for all subdirectories of the artistpath. (Except for the directory-names in the <em>ignorealbum</em> list)</p></li>
</ol>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>artistpath</strong> (<em>str</em>) – Absolute or relative (to the music directory) path to the artist that shall be added to the database.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If the path does not address a directory</p></li>
<li><p><strong>ValueError</strong> – If artist is already in the database</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.AddLyricsFromFile">
<code class="sig-name descname">AddLyricsFromFile</code><span class="sig-paren">(</span><em class="sig-param">songpath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.AddLyricsFromFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.AddLyricsFromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>This method can be used to add lyrics from the file of a song into the database.
It tries to load the metadata from the song file.
If that succeeds, the song entry gets loaded from the database and the lyrics state of that entry gets checked.
The lyrics from the file gets stored in the song database in case the current lyrics state is <em>empty</em>.
Otherwise the files lyrics get rejected.</p>
<p>This method returns <code class="docutils literal notranslate"><span class="pre">True</span></code> when <em>new</em> lyrics were added. If there already exist lyrics <code class="docutils literal notranslate"><span class="pre">False</span></code> gets returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>songpath</strong> (<em>str</em>) – Absolute song path, or relative to the music root directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.AddSong">
<code class="sig-name descname">AddSong</code><span class="sig-paren">(</span><em class="sig-param">songpath</em>, <em class="sig-param">artistid=None</em>, <em class="sig-param">albumid=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.AddSong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.AddSong" title="Permalink to this definition">¶</a></dt>
<dd><p>This method adds a song to the MusicDB database.
To do so, the following steps were done:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Check if the song already exists in the database</p></li>
<li><p>Load the metadata from the song using <a class="reference internal" href="../lib/metatags.html#lib.metatags.MetaTags.GetAllMetadata" title="lib.metatags.MetaTags.GetAllMetadata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lib.metatags.MetaTags.GetAllMetadata()</span></code></a></p></li>
<li><p>Analyze the path of one of the song using <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AnalysePath" title="mdbapi.database.MusicDBDatabase.AnalysePath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysePath()</span></code></a></p></li>
<li><p>If <em>artistid</em> is not given as parameter, it gets read from the database identifying the artist by its path.</p></li>
<li><p>If <em>albumid</em> is not given as parameter, it gets read from the database identifying the album by its path.</p></li>
<li><p>Set file attributes and ownership using <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.FixAttributes" title="mdbapi.database.MusicDBDatabase.FixAttributes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FixAttributes()</span></code></a></p></li>
<li><p>Add song to database</p></li>
<li><p>If the parameter <em>albumid</em> was <code class="docutils literal notranslate"><span class="pre">None</span></code> the <em>numofsongs</em> entry of the determined album gets incremented</p></li>
<li><p>If there are lyrics in the song file, they get also inserted into the database</p></li>
</ol>
</div></blockquote>
<p>In case the album ID is set, this method assumes that its database entry gets managed by the <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddAlbum" title="mdbapi.database.MusicDBDatabase.AddAlbum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddAlbum()</span></code></a> method.
So, nothing will be changed regarding the album.
If album ID was <code class="docutils literal notranslate"><span class="pre">None</span></code>, this method also updates the album-entry, namely the <em>numofsongs</em> value gets incremented.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>songpath</strong> (<em>str</em>) – Absolute path, or path relative to the music root directory, to the song that shall be added to the database.</p></li>
<li><p><strong>artistid</strong> (<em>int</em>) – Optional, default value is <code class="docutils literal notranslate"><span class="pre">None</span></code>. The ID of the artist this song belongs to.</p></li>
<li><p><strong>albumid</strong> (<em>int</em>) – Optional, default value is <code class="docutils literal notranslate"><span class="pre">None</span></code>. The ID of the album this song belongs to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If song already exists in the database</p></li>
<li><p><strong>AssertionError</strong> – If analyzing the path fails</p></li>
<li><p><strong>AssertionError</strong> – If there is no album for this song in the database</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.AnalysePath">
<code class="sig-name descname">AnalysePath</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.AnalysePath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.AnalysePath" title="Permalink to this definition">¶</a></dt>
<dd><p>This method analyses a path to a song and extracts all the information encoded in the path.
The path must consist of three parts: The artist directory, the album directory and the song file.</p>
<p>A valid path has one the following structures:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{artistname}/{albumrelease}</span> <span class="pre">-</span> <span class="pre">{albumname}/{songnumber}</span> <span class="pre">{songname}.{extension}</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{artistname}/{albumrelease}</span> <span class="pre">-</span> <span class="pre">{albumname}/{cdnumber}-{songnumber}</span> <span class="pre">{songname}.{extension}</span></code></p></li>
</ul>
</div></blockquote>
<p>The returned dictionary holds all the extracted information.
In case there is no <em>cdnumber</em>, this entry is <code class="docutils literal notranslate"><span class="pre">1</span></code>.
The names can have all printable Unicode characters and of cause spaces.</p>
<p>If an error occurs because the path does not follow the scheme, <code class="docutils literal notranslate"><span class="pre">None</span></code> gets returned.
This method does not check if the path exists!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – A path of a song including artist and album directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>On success, a dictionary with information about the artist, album and song.
Otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code> gets returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.FindLostPaths">
<code class="sig-name descname">FindLostPaths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.FindLostPaths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.FindLostPaths" title="Permalink to this definition">¶</a></dt>
<dd><p>This method checks all artist, album and song entries if the paths to their related directories and files are still valid.
Entries with invalid paths gets returned in three lists: <code class="docutils literal notranslate"><span class="pre">artists,</span> <span class="pre">albums,</span> <span class="pre">songs</span></code></p>
<p>This method does not check if the song is cached in the Song Cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A three lists of database entries with invalid paths. Empty lists if there is no invalid entrie.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.FindNewPaths">
<code class="sig-name descname">FindNewPaths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.FindNewPaths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.FindNewPaths" title="Permalink to this definition">¶</a></dt>
<dd><p>This method searches inside the music directory for valid artist, album and song paths.
If those paths are not in the database, they will be returned.
So this method returns three lists: <code class="docutils literal notranslate"><span class="pre">artistpaths,</span> <span class="pre">albumpaths,</span> <span class="pre">songpaths</span></code>.
Each representing an artist, album or song that is not known by the database yet.
Files and directories in the configured ignore-list will be ignored.</p>
<p>If a new directory was found, the subdirectories will not be added!
So for a new album, the new songs are implicite and not listed in the new-songs-list.</p>
<p>This method is very optimistic. It will also list empty directories.
The user may want to check if the results of this method are valid for him.</p>
<p>Further more this method is error tolerant. This means, if in the database is an invalid entry,
this does not lead to errors. For example, if an album path gets renamed, this path will be returned.
It does not lead to an error that the old path is still in the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A three lists of paths that are valid but unknown by the database. Empty lists if there is no invalid entrie.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.FixAttributes">
<code class="sig-name descname">FixAttributes</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.FixAttributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.FixAttributes" title="Permalink to this definition">¶</a></dt>
<dd><p>This method changes the access permissions and ownership of a file or directory.
Only the addressed files or directory’s permissions gets changed, not their parents.</p>
<blockquote>
<div><ul class="simple">
<li><p>File permissions: <code class="docutils literal notranslate"><span class="pre">rw-rw-r--</span></code></p></li>
<li><p>Directory permissions: <code class="docutils literal notranslate"><span class="pre">rwxrwxr-x</span></code></p></li>
<li><p>Ownership as configured in the settings: <code class="docutils literal notranslate"><span class="pre">[music]-&gt;owner</span></code>:<code class="docutils literal notranslate"><span class="pre">[music]-&gt;group</span></code></p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – Path to an artist, album or song, relative to the music directory</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>Nothing</em></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError if path is neither a file nor a directory.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.RemoveAlbum">
<code class="sig-name descname">RemoveAlbum</code><span class="sig-paren">(</span><em class="sig-param">albumid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.RemoveAlbum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.RemoveAlbum" title="Permalink to this definition">¶</a></dt>
<dd><p>This method removes an album from the database.
The files gets not touched, and so it does not matter if they even exists.
All related information will also be removed.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For all songs in this album, the <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.RemoveSong" title="mdbapi.database.MusicDBDatabase.RemoveSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RemoveSong()</span></code></a> method gets called!</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not a <em>“set the deleted flag”</em> method.
The data gets actually removed from the database.
No recovery possible!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>albumid</strong> (<em>int</em>) – ID of the album that shall be removed from database</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.RemoveArtist">
<code class="sig-name descname">RemoveArtist</code><span class="sig-paren">(</span><em class="sig-param">artistid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.RemoveArtist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.RemoveArtist" title="Permalink to this definition">¶</a></dt>
<dd><p>This method removes an artist from the database.
The files gets not touched, and so it does not matter if they even exists.
All related information will also be removed.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For all artists albums, the <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.RemoveAlbum" title="mdbapi.database.MusicDBDatabase.RemoveAlbum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RemoveAlbum()</span></code></a> method gets called!</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not a <em>“set the deleted flag”</em> method.
The data gets actually removed from the database.
No recovery possible!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>artistid</strong> (<em>int</em>) – ID of the artist that shall be removed from database</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.RemoveSong">
<code class="sig-name descname">RemoveSong</code><span class="sig-paren">(</span><em class="sig-param">songid</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.RemoveSong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.RemoveSong" title="Permalink to this definition">¶</a></dt>
<dd><p>This method removed a song from the database.
The file gets not touched, and so it does not matter if it even exists.
All related information will also be removed.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not a <em>“set the deleted flag”</em> method.
The data gets actually removed from the database.
No recovery possible!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>songid</strong> (<em>int</em>) – ID of the song that shall be removed from database</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.TryAnalysePathFor">
<code class="sig-name descname">TryAnalysePathFor</code><span class="sig-paren">(</span><em class="sig-param">target='all'</em>, <em class="sig-param">path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.TryAnalysePathFor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.TryAnalysePathFor" title="Permalink to this definition">¶</a></dt>
<dd><p>This method checks if a path is valid for a specific target.</p>
<p>The check is done in the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Get all song paths</p></li>
<li><p>Apply an information extraction on all found song paths using <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AnalysePath" title="mdbapi.database.MusicDBDatabase.AnalysePath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysePath()</span></code></a></p></li>
</ol>
</div></blockquote>
<p>This guarantees, that all files are valid to process with MusicDB.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>str</em>) – Optional, default value is <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code>. One of the following targets: <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;artist&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;album&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;song&quot;</span></code></p></li>
<li><p><strong>path</strong> (<em>str</em>) – Optional, default value is <code class="docutils literal notranslate"><span class="pre">None</span></code>. Path to an artist, album or song. If target is <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code>, path can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> If the path is valid for the given target. Otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code> gets returned.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – when <em>target</em> is not <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;artist&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;album&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;song&quot;</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.UpdateAlbum">
<code class="sig-name descname">UpdateAlbum</code><span class="sig-paren">(</span><em class="sig-param">albumid</em>, <em class="sig-param">newpath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.UpdateAlbum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.UpdateAlbum" title="Permalink to this definition">¶</a></dt>
<dd><p>This method updates an already existing album entry in the database.
So in case some information in the filesystem were changed (renaming, new files, …) the database gets updated.
The following steps will be done to do this:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Update the <em>path</em> entry of the album to the new path</p></li>
<li><p>Reading a song file inside the directory to load meta data</p></li>
<li><p>Analyse the path to collect further information from the filesystem</p></li>
<li><p>Update database entry for the album with the new collected information</p></li>
</ol>
</div></blockquote>
<p>Updates information are:</p>
<blockquote>
<div><ul class="simple">
<li><p>path</p></li>
<li><p>name</p></li>
<li><p>release date</p></li>
<li><p>origin</p></li>
</ul>
</div></blockquote>
<p>All albums and songs of this artist will also be updated using
<a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateSong" title="mdbapi.database.MusicDBDatabase.UpdateSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateSong()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>albumid</strong> (<em>int</em>) – ID of the album entry that shall be updated</p></li>
<li><p><strong>newpath</strong> (<em>str</em>) – Relative path to the new album</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>AssertionError</strong> – When the new path is invalid</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.UpdateArtist">
<code class="sig-name descname">UpdateArtist</code><span class="sig-paren">(</span><em class="sig-param">artistid</em>, <em class="sig-param">newpath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.UpdateArtist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.UpdateArtist" title="Permalink to this definition">¶</a></dt>
<dd><p>This method updates an already existing artist entry in the database.</p>
<p>Updates information are:</p>
<blockquote>
<div><ul class="simple">
<li><p>path</p></li>
<li><p>name</p></li>
</ul>
</div></blockquote>
<p>All albums and songs of this artist will also be updated using
<a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateAlbum" title="mdbapi.database.MusicDBDatabase.UpdateAlbum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateAlbum()</span></code></a> and <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateSong" title="mdbapi.database.MusicDBDatabase.UpdateSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateSong()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>artistid</strong> (<em>int</em>) – ID of the artist entry that shall be updated</p></li>
<li><p><strong>newpath</strong> (<em>str</em>) – Relative path to the new artist</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.UpdateChecksum">
<code class="sig-name descname">UpdateChecksum</code><span class="sig-paren">(</span><em class="sig-param">songpath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.UpdateChecksum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.UpdateChecksum" title="Permalink to this definition">¶</a></dt>
<dd><p>This method can be used to add or update the checksum of the file of a song into the database.
The method does not care if there is already a checksum.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#mdbapi.database.MusicDBDatabase.AddSong" title="mdbapi.database.MusicDBDatabase.AddSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AddSong()</span></code></a> and <a class="reference internal" href="#mdbapi.database.MusicDBDatabase.UpdateSong" title="mdbapi.database.MusicDBDatabase.UpdateSong"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UpdateSong()</span></code></a> also update the checksum.
So after calling that methods, calling this <code class="docutils literal notranslate"><span class="pre">AddChecksum</span></code> method is not necessary.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>songpath</strong> (<em>str</em>) – Absolute song path, or relative to the music root directory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.UpdateServerCache">
<code class="sig-name descname">UpdateServerCache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.UpdateServerCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.UpdateServerCache" title="Permalink to this definition">¶</a></dt>
<dd><p>This method signals the MusicDB Websocket Server to update its caches by writing <code class="docutils literal notranslate"><span class="pre">refresh</span></code> into its named pipe.
This should always be called when there are new artists, albums or songs added to the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>Nothing</em></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.UpdateSong">
<code class="sig-name descname">UpdateSong</code><span class="sig-paren">(</span><em class="sig-param">songid</em>, <em class="sig-param">newpath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.UpdateSong"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.UpdateSong" title="Permalink to this definition">¶</a></dt>
<dd><p>This method updates a song entry and parts of the related album entry.
The following steps will be done to do this:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Update the <em>path</em> entry of the album to the new path</p></li>
<li><p>Reading the song files meta data</p></li>
<li><p>Analyse the path to collect further information from the filesystem</p></li>
<li><p>Update database entry with the new collected information</p></li>
</ol>
</div></blockquote>
<p>Updates information are:</p>
<blockquote>
<div><ul class="simple">
<li><p>path</p></li>
<li><p>name</p></li>
<li><p>song number</p></li>
<li><p>cd number</p></li>
<li><p>playtime</p></li>
<li><p>bitrate</p></li>
<li><p>checksum</p></li>
</ul>
</div></blockquote>
<p>Further more the following album information get updted:</p>
<blockquote>
<div><ul class="simple">
<li><p>numofsongs</p></li>
<li><p>numofcds</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>songid</strong> (<em>int</em>) – ID of the song entry that shall be updated</p></li>
<li><p><strong>newpath</strong> (<em>str</em>) – Relative path to the new album</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>AssertionError</strong> – When the new path is invalid</p></li>
<li><p><strong>Exception</strong> – When loading the meta data failes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="mdbapi.database.MusicDBDatabase.UpdateSongPath">
<code class="sig-name descname">UpdateSongPath</code><span class="sig-paren">(</span><em class="sig-param">newsongpath</em>, <em class="sig-param">oldsongpath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/database.html#MusicDBDatabase.UpdateSongPath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.database.MusicDBDatabase.UpdateSongPath" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is deprecated!
It will be removed in April 2019!</p>
</div>
<p>This method can be used to update a song.</p>
<p>The new song file must be named as necessary for MusicDB.
It is OK when the songs file name changes, as long as the cd and track number are equal to the old file.</p>
<p>The following steps will be done:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Get database entry from old song</p></li>
<li><p>Analyse new songs metatags and file name</p></li>
<li><p>Check if it is a valid replacement</p></li>
<li><p>Replace files (and creating a backup of the old song)</p></li>
<li><p>Try to set file attributes</p></li>
<li><p>Update database</p></li>
</ol>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If something went wrong, <code class="docutils literal notranslate"><span class="pre">False</span></code> gets returned.
Then only the new file must be replaced by the backup file.
The database is still consistent.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A single CD song cannot be updated to a multi CD one</p>
<p>The old and new song must have the same track number</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>newsongpath</strong> (<em>str</em>) – Absolute path to the new song</p></li>
<li><p><strong>oldsongpath</strong> (<em>str</em>) – Absolute path to the current song</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># replace an old mp3 by a new flac file</span>
<span class="n">db</span><span class="o">.</span><span class="n">UpdateSongPath</span><span class="p">(</span><span class="s2">&quot;/tmp/downloads/23 Is Everywhere.flac&quot;</span><span class="p">,</span> <span class="s2">&quot;/data/music/Illuminati/2023 - Sheeple/23 Is Everwhere.mp3&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018,2019 Ralf Stemmer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.2.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>