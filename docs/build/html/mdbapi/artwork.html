

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Artwork Management &mdash; MusicDB 5.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MusicDB 5.1.0 documentation" href="../index.html"/>
        <link rel="next" title="Blacklist" href="blacklist.html"/>
        <link rel="prev" title="tracker - Song Tracker" href="../mod/tracker.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MusicDB
          

          
          </a>

          
            
            
              <div class="version">
                5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basics/comparison.html">Comparison to Other Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#introducing-other-tools">Introducing other tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#metrics">Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#comparison">Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/comparison.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/concept.html">Philosophy of MusicDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/config.html">MusicDB Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#meta">meta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#websocket">websocket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#tls">TLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#database">database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#music">music</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#artwork">artwork</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#extern">extern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#tracker">tracker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#lycra">lycra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#icecast">Icecast</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#musicai">MusicAI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#randy">Randy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#log">log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/config.html#debug">debug</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/logging.html">Handling log-files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/mods.html">MusicDB Commandline Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#loading-of-modules">Loading of Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/mods.html#creation-of-new-modules">Creation of new Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/overview.html">Overview of MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#music-information-purple">Music Information (Purple)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-data-blue">MusicDB Data (Blue)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#music-database">Music Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#artwork-cache">Artwork Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-data-configuration">MusicDB Data &amp; Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#musicdb-components-green">MusicDB Components (Green)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#command-line-modules">Command-Line Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-webui">MusicDB WebUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#musicdb-server">MusicDB Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#external-servers-black">External Servers (Black)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#http-server">HTTP Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/overview.html#icecast-server">Icecast Server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/overview.html#consuming-music-orange">Consuming Music (Orange)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/streaming.html">MusicDB Stream</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#general-data-flow">General Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/streaming.html#stream-implementation">Stream Implementation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/testvm.html">MusicDB Test VMs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#qemu-installation">qemu Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#basic-setup">Basic Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#disk-images">Disk Images</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#system-setup">System Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#installing-updating-musicdb-test-environment">Installing/Updating MusicDB Test Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#create-dummy-files">Create Dummy Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/testvm.html#test-systems">Test Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#debian">Debian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#raspian">Raspian</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/testvm.html#arch-linux">Arch Linux</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/webapi.html">MusicDB Websocket API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#communication">Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#packet-format">Packet format</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#client-side-interface">Client side interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#callback-functions">Callback functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#send-data-to-the-server">Send data to the server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#events">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/webapi.html#module-lib.ws.mdbwsi">Server side API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#artists">Artists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#albums">Albums</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#songs">Songs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#queue">Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#tag-related">Tag related</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#lyrics">Lyrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/webapi.html#other">Other</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../basics/workflow.html">Workflow for development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#working-on-code">Working on code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#rebuilding-the-documentation">Rebuilding the Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#using-git">Using git</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#micro-commits">Micro Commits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#createing-a-hotfix">Createing a Hotfix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics/workflow.html#merging-develop-to-master">Merging Develop to Master</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics/workflow.html#releasing-a-new-version">Releasing a New Version</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/install.html">Installation &amp; Update</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#installation-automatic">Installation (Automatic)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#install-dependencies">Install Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#executing-the-install-sh-script">Executing the install.sh Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#install-all-dependencies">Install all Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#configureing-musicdb">Configureing MusicDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#installation-manually">Installation (Manually)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#system-preparation">System Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#id1">Install dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#basic-packages">Basic packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#download-musicdb">Download MusicDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#libprinthex">libprinthex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#id3edit">id3edit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/install.html#musicdb">musicdb</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#configureing-musicdb-webui">Configureing MusicDB WebUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#cuda-for-musicai">CUDA for MusicAI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#first-run">First Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/install.html#update">Update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/music.html">Music</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#naming">Naming</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#artist-directory-name">Artist Directory Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#album-directory-name">Album Directory Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#song-file-name">Song File Name</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#importing-albums-to-musicdb">Importing Albums to MusicDB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-database-module">Using the database module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-repair-module">Using the repair module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/music.html#using-the-add-module">Using the add module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/music.html#updating-songs">Updating Songs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/scripts.html">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-boot">musicdb-boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-shutdown">musicdb-shutdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-start">musicdb-start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#musicdb-stop">musicdb-stop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/scripts.html#update">update</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">CLI Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mod/add.html">add - Add New Album to MusicDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#select-album">Select Album</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#repair-file-names">Repair File Names</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#album-import-form">Album Import Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#new-songs-form">New Songs Form</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mod/add.html#online-check">Online Check</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mod/add.html#import-process">Import Process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/artwork.html">artwork - Artwork Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/artwork.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/cache.html">cache - Music Cache Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/cache.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/database.html">database - Music DB Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/extern.html">extern - Music File Uploader</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/extern.html#class">class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/extern.html#automatization">Automatization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/genres.html">genres - Genre Manager with CLUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/genres.html#managing-genres">Managing Genres</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/genres.html#updating-caches">Updating Caches</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/metadata.html">metadata - Metadata Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/mise.html">mise - Micro Search Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/mise.html#class">class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/moods.html">moods - Mood Tag Manager with CLUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#mood-list">Mood List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#mood-grid">Mood Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/moods.html#style-guide">Style Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/musicai.html">musicai - MusicAI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/musicai.html#module-mod.musicai">Module Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/musicai.html#class-description">Class Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/repair.html">repair - Repair Database Entries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/repair.html#lyrics-check">Lyrics Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/repair.html#checksum-update">Checksum update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/server.html">server - MusicDB Websocket Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/stats.html">stats - MusicDB Song Statistic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mod/tags.html">tags - MusicDB Tag Manager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#main-commands">Main commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#style-guide">Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tags.html#example-calls">Example calls</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mod/tracker.html">tracker - Song Tracker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mod/tracker.html#module-mod.tracker">Module Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mod/tracker.html#class-description">Class Description</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Classes</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Artwork Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#database">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="#path-structure">Path structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#web-browsers">Web Browsers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scaling">Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manifest">Manifest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#algorithm">Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#musicdbartwork-class">MusicDBArtwork Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-lib.cache">ArtworkCache Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="blacklist.html">Blacklist</a><ul>
<li class="toctree-l2"><a class="reference internal" href="blacklist.html#module-mdbapi.blacklist">Blacklist Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="blacklist.html#id1">Blacklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="blacklist.html#blacklist-interface-class">Blacklist Interface Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="database.html">MusicDBDatabase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="database.html#musicdbdatabase-class">MusicDBDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extern.html">MusicDBExtern</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extern.html#initializing-a-storage">Initializing a Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extern.html#storage-configuration">Storage Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="extern.html#the-state-file">The State-File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="extern.html#updating-a-storage">Updating a Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="extern.html#handling-toxic-environments">Handling Toxic Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="extern.html#musicdbextern-class">MusicDBExtern Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lycra.html">LyCra - Lyrics Crawler</a><ul>
<li class="toctree-l2"><a class="reference internal" href="lycra.html#module-mdbapi.lycra">Lycra API Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="lycra.html#crawler-base-class">Crawler Base Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="lycra.html#module-lib.db.lycradb">Lycra Database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mise.html">Micro Search Engine</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mise.html#musicdbmicrosearchengine-class">MusicDBMicroSearchEngine Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="musicai.html">MusicAI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#external-dependencies">External Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#training-time">Training Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#removing-an-old-model">Removing an old model</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#data-handling">Data Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musicai.html#featureset">Featureset</a></li>
<li class="toctree-l3"><a class="reference internal" href="musicai.html#trainingset">Trainingset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#module-mdbapi.musicai">MusicAI Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="musicai.html#musicai-class">MusicAI Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="musiccache.html">MusicCache</a><ul>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#features-and-constraints">Features and Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#updating-the-cache">Updating the Cache</a><ul>
<li class="toctree-l3"><a class="reference internal" href="musiccache.html#add-a-song-to-the-cache">Add a song to the cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="musiccache.html#get-a-songs-path-inside-the-case">Get a songs path inside the case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="musiccache.html#musiccache-class">MusicCache Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="randy.html">Randomizer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="randy.html#module-mdbapi.randy">Randy Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="randy.html#song-selection-algorithm">Song Selection Algorithm</a><ul>
<li class="toctree-l4"><a class="reference internal" href="randy.html#database-stage">Database Stage</a></li>
<li class="toctree-l4"><a class="reference internal" href="randy.html#blacklist-stage">Blacklist Stage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="randy.html#randy-class">Randy Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server.html">MusicDB Websocket Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="songqueue.html">MusicDB Song Queue</a><ul>
<li class="toctree-l2"><a class="reference internal" href="songqueue.html#queue-management">Queue Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="songqueue.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="songqueue.html#song-queue-class">Song Queue Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stream.html">Streaming Server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="stream.html#interface">Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#streaming-thread">Streaming Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#command-queue">Command Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#event-management">Event Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="stream.html#stream-manager-class">Stream Manager Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tags.html">MusicDBTags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tags.html#musicdbtags-class">MusicDBTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tracker.html">Song Tracker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tracker.html#tracker-class">Tracker Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracker.html#module-lib.db.trackerdb">Tracker Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="tracker.html#trackerdatabase-class">TrackerDatabase Class</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../lib/clui.html">Command Line User Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.text">Text</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.frame">Frame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.pane">Pane</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.buttonview">ButtonView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.listview">ListView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.dialog">Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.textinput">TextInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.boolinput">BoolInput</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/clui.html#module-lib.clui.tabgroup">TabGroup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/config.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#base-classes">Base Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/config.html#module-lib.cfg.config">Config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/config.html#module-lib.cfg.csv">CSVFile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#musicdb-configuration">MusicDB Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-lib.cfg.extern">External Storage Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/config.html#module-lib.cfg.mdbstate">MusicDB State</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/database.html">Database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/database.html#database-class">Database Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/fileprocessing.html">Fileprocessing Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/fileprocessing.html#fileprocessing-class">Fileprocessing Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/filesystem.html">Filesystem Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/filesystem.html#filesystem-class">Filesystem Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/gstreamer.html">GStreamer Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/gstreamer.html#gstreamer-pipeline">GStreamer Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/gstreamer.html#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/gstreamer.html#gstreamerinterface-class">GStreamerInterface Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/hdf5storage.html">HDF5Storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/hdf5storage.html#hdf5storage-class">HDF5Storage Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/icecast.html">Icecast Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/icecast.html#introduction-to-icecast">Introduction to Icecast</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/icecast.html#icecast-configuration">Icecast Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/icecast.html#icecast-class">Icecast Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/metatags.html">Meta Tags</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/metatags.html#metatags-class">MetaTags Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3file.html">MP3 File Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3file.html#mp3file-class">MP3File Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3stream.html">MP3 Stream Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3stream.html#mp3stream-class">MP3Stream Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/mp3transcoder.html">MP3 Transcoder</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#gstreamer-pipeline">GStreamer Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#unix-pipe">UNIX Pipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#transcoding">Transcoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/mp3transcoder.html#mp3transcoder-class">MP3Transcoder Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/musicdb.html">MusicDatabase</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#adding-a-column">Adding a Column</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#songs">Songs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#song-relates-methods">Song Relates Methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#albums">Albums</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#album-related-methods">Album Related Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#artworks">Artworks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#origin">Origin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#artists">Artists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#lyrics">Lyrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#tags">Tags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#tag-definition-table">Tag Definition Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#tag-mapping-table">Tag Mapping Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lib/musicdb.html#database-api">Database API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lib/musicdb.html#musicdatabase-class">MusicDatabase Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/namedpipe.html">NamedPipe</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/namedpipe.html#namedpipe-class">NamedPipe Class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lib/pidfile.html">PID File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lib/websockets.html">MusicDB Websocket Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../lib/websockets.html#module-lib.ws.server">Websocket Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lib/websockets.html#module-lib.ws.websocket">Websocket Protocol</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">JaveScript Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../webui/taginput.html">Tag Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webui/taginput.html#taginput-js">taginput.js</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#files">Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#musicdb-interface">MusicDB Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webui/taginput.html#tagmanager-js">tagmanager.js</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#id1">Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#id2">MusicDB Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/taginput.html#id3">Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../webui/websockets.html">Websocket Connection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#connection-process">Connection Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#watchdog">Watchdog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#communication-with-the-server">Communication with the server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#sending-data">Sending Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../webui/websockets.html#receiving-data">Receiving Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../webui/websockets.html#minimal-usage">Minimal usage</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html">Impressum</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#angaben-gemasz-5-tmg">Angaben gemäß § 5 TMG</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#kontakt">Kontakt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#verantwortlich-fur-den-inhalt-nach-55-abs-2-rstv">Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-inhalte">Haftung für Inhalte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#haftung-fur-links">Haftung für Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#urheberrecht">Urheberrecht</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../other/impressum.html#datenschutzerklarung-privacy-statement">Datenschutzerklärung / Privacy Statement</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#datenschutz">Datenschutz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#cookies">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#server-log-files">Server-Log-Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#facebook-plugins-like-button">Facebook-Plugins (Like-Button)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#twitter">Twitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#google">Google+</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#youtube">YouTube</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#ssl-verschlusselung">SSL-Verschlüsselung</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other/impressum.html#widerspruch-werbe-mails">Widerspruch Werbe-Mails</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MusicDB</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Artwork Management</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/mdbapi/artwork.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-mdbapi.artwork">
<span id="artwork-management"></span><h1>Artwork Management<a class="headerlink" href="#module-mdbapi.artwork" title="Permalink to this headline">¶</a></h1>
<p>This module handles the artwork (cover) of albums.
Its main task is to cache, scale and provide them to the GUI.</p>
<p>It also manages the manifest-file needed by some browsers to make them cache the artwork files</p>
<div class="section" id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h2>
<p>The artwork data is part of the album entry in the MusicDB Database.
The artwork part consists of the following entries:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="23%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>artworkpath</td>
<td>bgcolor</td>
<td>fgcolor</td>
<td>hlcolor</td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="docutils">
<dt>artworkpath (string)</dt>
<dd><p class="first">The path to the cover relative to the artwork root directory set in the MusicDB Configuration.
To access a scaled version of the artwork, the scale as prefix can be used.</p>
<p class="last">For example, to access a cover, the absolute path would be <code class="docutils literal notranslate"><span class="pre">$ARTWORKCACHE/$ARTWORKPATH</span></code>,
a scaled version can be found in <code class="docutils literal notranslate"><span class="pre">$ARTWORKCACHE/50x50/$ARTWORKPATH</span></code>.
Of cause only if the scale of 50x50 is supported (= configured in the Config-File).</p>
</dd>
<dt>bgcolor, fgcolor, hlcolor (string)</dt>
<dd><p class="first">HTML-Color-Code that shall be used by the UI.
This color is set by the user.
Its format is <code class="docutils literal notranslate"><span class="pre">&quot;#&quot;</span> <span class="pre">+</span> <span class="pre">RR</span> <span class="pre">+</span> <span class="pre">GG</span> <span class="pre">+</span> <span class="pre">BB</span></code> with <em>RR</em>, <em>GG</em>, <em>BB</em> as a two digit hexadecimal number.</p>
<p class="last"><em>bgcolor</em> is for background, <em>fgcolor</em> is the primary foreground color and <em>hlcolor</em> is the secondary color for less important elements in the foreground (like frames).
For a complementary color scheme use <em>bgcolor</em> and <em>fgcolor</em> only.
For a monochromatic scheme use <em>bgcolor</em> in a darker and less saturated variant for the background. The lighter and more saturated variant for the foreground.
Keep in mind that the user may set all three colors to the same hue so that a monochromatic scheme gets forced.</p>
</dd>
</dl>
</div>
<div class="section" id="path-structure">
<h2>Path structure<a class="headerlink" href="#path-structure" title="Permalink to this headline">¶</a></h2>
<p>The artwork root directory can be configured in the MusicDB Configuration file.
Everything related to artwork takes place in this directory.
To use the artwork inside a web frontend, the HTTPS server needs access to this directory.</p>
<p>Relative to the artwork root directory are the artwork paths stored in the database.
Source-Artworks, those who are not scaled, are in this directory.
All scaled artworks are in sub-directories named by the resolution of the images.</p>
<p>The name of an image, scaled and non-scaled, consists of the artist name and album name.
The file format is JPEG. So a name looks like this: <code class="docutils literal notranslate"><span class="pre">$Artistname</span> <span class="pre">-</span> <span class="pre">$Albumname.jpg</span></code>.
This guarantees unique file names that are human readable at the same time.
To get the 100x100 scaled version of this artwork just prepend <code class="docutils literal notranslate"><span class="pre">100x100/</span></code> to the path set in the database: <code class="docutils literal notranslate"><span class="pre">100x100/$Artistname</span> <span class="pre">-</span> <span class="pre">$Albumname.jpg</span></code></p>
<p>The file name gets created by the method <a class="reference internal" href="#mdbapi.artwork.MusicDBArtwork.CreateArtworkName" title="mdbapi.artwork.MusicDBArtwork.CreateArtworkName"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CreateArtworkName()</span></code></a>.
This method replaces “/” by an Unicode division slash to avoid problems with the filesystem.</p>
<p>In case there is no artwork given for an album, the default artwork is <code class="docutils literal notranslate"><span class="pre">default.jpg</span></code>.</p>
<p>All new creates files were set to the ownership <code class="docutils literal notranslate"><span class="pre">[music]-&gt;owner:[music]-&gt;group</span></code> and gets the permission <code class="docutils literal notranslate"><span class="pre">rw-rw-r--</span></code></p>
<div class="section" id="web-browsers">
<h3>Web Browsers<a class="headerlink" href="#web-browsers" title="Permalink to this headline">¶</a></h3>
<p>Web browsers have to prefix the path with <code class="docutils literal notranslate"><span class="pre">artwork/</span></code>.
So, the server must be configured.</p>
</div>
</div>
<div class="section" id="scaling">
<h2>Scaling<a class="headerlink" href="#scaling" title="Permalink to this headline">¶</a></h2>
<p>Scales that shall be provides are set in the MusicDB Configuration as list of edge-lengths.
For example, to generate 50x50, 100x100 and 500x500 versions of an artwork, the configuration would look like this: <code class="docutils literal notranslate"><span class="pre">scales=50,</span> <span class="pre">100,</span> <span class="pre">500</span></code>
The <strong>scaled artwork gets stored as progressive JPEGs</strong> to get a better responsiveness for the WebUI.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[artwork]</span>
<span class="na">path</span><span class="o">=</span><span class="s">/data/musicdb/artwork</span>
<span class="na">scales</span><span class="o">=</span><span class="s">50, 150, 500</span>
<span class="na">manifesttemplate</span><span class="o">=</span><span class="s">/srv/musicdb/manifest.appcache.template</span>
<span class="na">manifest</span><span class="o">=</span><span class="s">/srv/musicdb/manifest.appcache</span>
</pre></div>
</div>
</div>
<div class="section" id="manifest">
<h2>Manifest<a class="headerlink" href="#manifest" title="Permalink to this headline">¶</a></h2>
<p>To make a web browser cache all the artworks that can end up in hundreds of megabytes of data a cache manifest file is needed.
Further more, these files are available if the client is offline.
This is mandatory to “store” the WebUI as iOS app on the iOS home screen.
The manifest gets generated in <code class="xref py py-meth docutils literal notranslate"><span class="pre">GenerateAppCacheManifest()</span></code>.</p>
</div>
<div class="section" id="algorithm">
<h2>Algorithm<a class="headerlink" href="#algorithm" title="Permalink to this headline">¶</a></h2>
<p>To update the album artwork cache the following steps are done:</p>
<blockquote>
<div><ol class="arabic simple">
<li><dl class="first docutils">
<dt>Read metadata from file in <a class="reference internal" href="#mdbapi.artwork.MusicDBArtwork.GetArtworkFromFile" title="mdbapi.artwork.MusicDBArtwork.GetArtworkFromFile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GetArtworkFromFile()</span></code></a></dt>
<dd><ol class="first last arabic">
<li>If there is no artwork, use default settings</li>
<li>If there is an artwork, copy it to the artwork-directory</li>
</ol>
</dd>
</dl>
</li>
<li>Create scaled versions of the new artwork in <a class="reference internal" href="#mdbapi.artwork.MusicDBArtwork.SetArtwork" title="mdbapi.artwork.MusicDBArtwork.SetArtwork"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SetArtwork()</span></code></a></li>
<li>Create database entry in <a class="reference internal" href="#mdbapi.artwork.MusicDBArtwork.SetArtwork" title="mdbapi.artwork.MusicDBArtwork.SetArtwork"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SetArtwork()</span></code></a></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="musicdbartwork-class">
<h2>MusicDBArtwork Class<a class="headerlink" href="#musicdbartwork-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="mdbapi.artwork.MusicDBArtwork">
<em class="property">class </em><code class="descclassname">mdbapi.artwork.</code><code class="descname">MusicDBArtwork</code><span class="sig-paren">(</span><em>config</em>, <em>database</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/artwork.html#MusicDBArtwork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.artwork.MusicDBArtwork" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> – MusicDB configuration object</li>
<li><strong>database</strong> – MusicDB database</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code> – if config or database are not of the correct type</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> – If one of the working-paths set in the config file does not exist</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="staticmethod">
<dt id="mdbapi.artwork.MusicDBArtwork.CreateArtworkName">
<em class="property">static </em><code class="descname">CreateArtworkName</code><span class="sig-paren">(</span><em>artistname</em>, <em>albumname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/artwork.html#MusicDBArtwork.CreateArtworkName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.artwork.MusicDBArtwork.CreateArtworkName" title="Permalink to this definition">¶</a></dt>
<dd><p>This method creates the name for an artwork regarding the following schema:
<code class="docutils literal notranslate"><span class="pre">$Artistname</span> <span class="pre">-</span> <span class="pre">$Albumname.jpg</span></code>.
If there is a <code class="docutils literal notranslate"><span class="pre">/</span></code> in the name, it gets replaced by <code class="docutils literal notranslate"><span class="pre">∕</span></code> (U+2215, DIVISION SLASH)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>artistname</strong> (<em>str</em>) – Name of an artist</li>
<li><strong>albumname</strong> (<em>str</em>) – Name of an album</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">valid artwork filename</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mdbapi.artwork.MusicDBArtwork.GenerateAppCacheManifest">
<code class="descname">GenerateAppCacheManifest</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/artwork.html#MusicDBArtwork.GenerateAppCacheManifest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.artwork.MusicDBArtwork.GenerateAppCacheManifest" title="Permalink to this definition">¶</a></dt>
<dd><p>This method creates a manifest file for web browsers.
Creating is done in two steps.
First the template given in the configuration gets copied.
Second the paths of all artworks get append to the file.
Also, those of the scaled versions (as given in the config file).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>Nothing</em></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PermissonError</span></code> – When there is no write access to the manifest file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mdbapi.artwork.MusicDBArtwork.GetArtworkFromFile">
<code class="descname">GetArtworkFromFile</code><span class="sig-paren">(</span><em>album</em>, <em>tmpawfile</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/artwork.html#MusicDBArtwork.GetArtworkFromFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.artwork.MusicDBArtwork.GetArtworkFromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>This method tries to get an artwork from the metadata of the first song of an album.
With the first song, the first one in the database related to the album is meant.
The metadata gets loaded and the artwork stored to a temporary file using the method
<a class="reference internal" href="../lib/metatags.html#lib.metatags.MetaTags.StoreArtwork" title="lib.metatags.MetaTags.StoreArtwork"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lib.metatags.MetaTags.StoreArtwork()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>album</strong> – Album entry from the MusicDB Database</li>
<li><strong>tmpawfile</strong> (<em>str</em>) – Temporary artwork path (incl filename) to which the artwork shall be written</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mdbapi.artwork.MusicDBArtwork.SetArtwork">
<code class="descname">SetArtwork</code><span class="sig-paren">(</span><em>albumid</em>, <em>artworkpath</em>, <em>artworkname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/artwork.html#MusicDBArtwork.SetArtwork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.artwork.MusicDBArtwork.SetArtwork" title="Permalink to this definition">¶</a></dt>
<dd><p>This method sets a new artwork for an album.
It does the following things:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Copy the artwork from <em>artworkpath</em> to the artwork root directory under the name <em>artworkname</em></li>
<li>Create scaled Versions of the artwork by calling <a class="reference internal" href="#lib.cache.ArtworkCache.GetArtwork" title="lib.cache.ArtworkCache.GetArtwork"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lib.cache.ArtworkCache.GetArtwork()</span></code></a> for each resolution.</li>
<li>Update entry in the database</li>
</ol>
</div></blockquote>
<p>All new creates files ownership will be set to <code class="docutils literal notranslate"><span class="pre">[music]-&gt;owner:[music]-&gt;group</span></code> and gets the permission <code class="docutils literal notranslate"><span class="pre">rw-rw-r--</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>albumid</strong> – ID of the Album that artwork shall be set</li>
<li><strong>artworkpath</strong> (<em>str</em><em>, </em><em>NoneType</em>) – The absolute path of an artwork that shall be added to the database. If <code class="docutils literal notranslate"><span class="pre">None</span></code> the method assumes that the default artwork shall be set. <em>artworkname</em> will be ignored in this case.</li>
<li><strong>artworkname</strong> (<em>str</em>) – The relative path of the final artwork.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">True</span></code> on success, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Copy from metadata extracted temporary artwork to the artwork directory</span>
<span class="bp">self</span><span class="o">.</span><span class="n">SetArtwork</span><span class="p">(</span><span class="n">albumid</span><span class="p">,</span> <span class="s2">&quot;/tmp/musicdbtmpartwork.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;Artist - Album.jpg&quot;</span><span class="p">)</span>

<span class="c1"># Copy a user-defined artwork to the artwork directory</span>
<span class="bp">self</span><span class="o">.</span><span class="n">SetArtwork</span><span class="p">(</span><span class="n">albumid</span><span class="p">,</span> <span class="s2">&quot;/home/username/downloads/fromzeintanetz.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;Artist - Album.jpg&quot;</span><span class="p">)</span>

<span class="c1"># Set the default artwork</span>
<span class="bp">self</span><span class="o">.</span><span class="n">SetArtwork</span><span class="p">(</span><span class="n">albumid</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="nb">any</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="mdbapi.artwork.MusicDBArtwork.UpdateAlbumArtwork">
<code class="descname">UpdateAlbumArtwork</code><span class="sig-paren">(</span><em>album</em>, <em>artworkpath=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mdbapi/artwork.html#MusicDBArtwork.UpdateAlbumArtwork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mdbapi.artwork.MusicDBArtwork.UpdateAlbumArtwork" title="Permalink to this definition">¶</a></dt>
<dd><p>This method updates the artwork path entry of an album and the artwork files in the artwork directory.
If a specific artwork shall be forced to use, <em>artworkpath</em> can be set to this artwork file.
Following the concept <em>The Filesystem Is Always Right</em> and <em>Do Not Trust Metadata</em>, the user specified artwork path has higher priority.
Metadata will only be processed if <em>artworkpath</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<p>So an update takes place if <em>at least one</em> of the following condition is true:</p>
<blockquote>
<div><ol class="arabic simple">
<li>The database entry points to <code class="docutils literal notranslate"><span class="pre">default.jpg</span></code></li>
<li><em>artworkpath</em> is not <code class="docutils literal notranslate"><span class="pre">None</span></code></li>
<li>If the database entry points to a nonexistent file</li>
</ol>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>album</strong> – An Album Entry from the MusicDB Database</li>
<li><strong>artworkpath</strong> (<em>str</em><em>, </em><em>NoneType</em>) – Absolute path of an artwork that shall be used as album artwork. If <code class="docutils literal notranslate"><span class="pre">None</span></code> the Method tries to extract the artwork from the meta data of an albums song.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><code class="docutils literal notranslate"><span class="pre">True</span></code> If either the update was successful or there was no update necessary.
<code class="docutils literal notranslate"><span class="pre">False</span></code> If the update failed. Reasons can be an invalid <em>artworkpath</em>-Argument</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-lib.cache">
<span id="artworkcache-class"></span><h2>ArtworkCache Class<a class="headerlink" href="#module-lib.cache" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="lib.cache.ArtworkCache">
<em class="property">class </em><code class="descclassname">lib.cache.</code><code class="descname">ArtworkCache</code><span class="sig-paren">(</span><em>artworkdir</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/cache.html#ArtworkCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.cache.ArtworkCache" title="Permalink to this definition">¶</a></dt>
<dd><p>This class handles the artwork cache.
Its main job is to scale an image if a special resolution is requested.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>artworkdir</strong> – Absolute path to the artwork root directory</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="lib.cache.ArtworkCache.GetArtwork">
<code class="descname">GetArtwork</code><span class="sig-paren">(</span><em>artworkname</em>, <em>resolution</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/lib/cache.html#ArtworkCache.GetArtwork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lib.cache.ArtworkCache.GetArtwork" title="Permalink to this definition">¶</a></dt>
<dd><p>This method returns a valid path to an artwork with the specified resolution.</p>
<p>The final path will consist of the <em>artworkdir</em> given as class parameter, the <em>resolution</em> as subdirectory and the <em>artworkname</em> as filename. (<code class="docutils literal notranslate"><span class="pre">{artworkdir}/{resolution}/{artworkname}</span></code>)</p>
<p>If the artwork does not exist for this resolution it will be generated.
If the directory for that scale does not exist, it will be created.
In case an error occcurs, an exception gets raised.</p>
<p>The resolution is given as string in the format <code class="docutils literal notranslate"><span class="pre">{X}x{Y}</span></code> (For example: <code class="docutils literal notranslate"><span class="pre">100x100</span></code>).
<em>X</em> and <em>Y</em> must have the same value.
This method expects an aspect ratio of 1:1.</p>
<p>Beside scaling the JPEG, it will be made progressive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>artworkname</strong> (<em>str</em>) – filename of the source artwork (Usually <code class="docutils literal notranslate"><span class="pre">$Artist</span> <span class="pre">-</span> <span class="pre">$Album.jpg</span></code>)</li>
<li><strong>resolution</strong> (<em>str</em>) – resolution of the requested artwork</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Relative path to the artwork in the specified resolution.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> – When the source file does not exist</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cache</span> <span class="o">=</span> <span class="n">ArtworkCache</span><span class="p">(</span><span class="s2">&quot;/data/artwork&quot;</span><span class="p">)</span>
<span class="n">path</span>  <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">GetArtwork</span><span class="p">(</span><span class="s2">&quot;example.jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;150x150&quot;</span><span class="p">)</span>
<span class="c1"># returned path: &quot;150x150/example.jpg&quot;</span>
<span class="c1"># absolute path: &quot;/data/artwork/150x150/example.jpg&quot;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018,2019 Ralf Stemmer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>